<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loading... ‚Äî VLTX</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=Outfit:wght@300;400;500;600;700&family=Space+Mono:wght@400;700&family=DM+Sans:wght@300;400;500;600&family=Orbitron:wght@400;600;700&display=swap" rel="stylesheet">
<style>
@property --spin { syntax: '<angle>'; inherits: false; initial-value: 0deg; }
@property --hue  { syntax: '<number>'; inherits: true; initial-value: 0; }

:root {
  --bg: #030308;
  --accent: #a855f7;
  --accent2: #22d3ee;
  --card-bg: rgba(12,12,22,0.94);
  --border: rgba(168,85,247,0.18);
  --text: #f0f0fa;
  --muted: #6b6b8a;
  --radius: 26px;
  --inner-r: 18px;
}

*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
html{scroll-behavior:smooth}
body{min-height:100vh;font-family:'Outfit',sans-serif;color:var(--text);overflow-x:hidden;background:var(--bg)}
body.has-mouse{cursor:none}
body.light-mode{filter:invert(1) hue-rotate(180deg)}

/* CURSOR */
#cur,#cur-trail{position:fixed;border-radius:50%;pointer-events:none;z-index:9999;transform:translate(-50%,-50%);opacity:0;transition:opacity .3s;will-change:left,top}
#cur{width:8px;height:8px;background:var(--accent);box-shadow:0 0 10px var(--accent),0 0 22px var(--accent);transition:width .15s,height .15s,opacity .3s}
#cur-trail{width:26px;height:26px;border:1.5px solid rgba(168,85,247,.4);z-index:9998}
body.cursor-dot #cur{width:8px;height:8px;background:var(--accent)}
body.cursor-ring #cur{width:22px;height:22px;background:transparent;border:2px solid var(--accent);box-shadow:none}
body.cursor-cross #cur{width:20px;height:20px;background:transparent;border:none;box-shadow:none}
body.cursor-cross #cur::before,body.cursor-cross #cur::after{content:'';position:absolute;background:var(--accent);border-radius:1px}
body.cursor-cross #cur::before{width:2px;height:100%;left:50%;transform:translateX(-50%)}
body.cursor-cross #cur::after{height:2px;width:100%;top:50%;transform:translateY(-50%)}
body.cursor-glow #cur{width:32px;height:32px;background:radial-gradient(circle,var(--accent) 0%,transparent 70%);box-shadow:0 0 22px var(--accent);opacity:.6!important}
body.cursor-none #cur,body.cursor-none #cur-trail{display:none}

/* BACKGROUNDS */
#bg-video{position:fixed;inset:0;width:100%;height:100%;object-fit:cover;z-index:0;pointer-events:none}
#bg-image{position:fixed;inset:0;width:100%;height:100%;object-fit:cover;z-index:0;pointer-events:none;display:none}
.bg-overlay{position:fixed;inset:0;z-index:1;background:radial-gradient(ellipse 70% 55% at 15% 15%,rgba(168,85,247,.1) 0%,transparent 60%),radial-gradient(ellipse 55% 70% at 85% 85%,rgba(34,211,238,.06) 0%,transparent 60%),var(--bg);animation:bgPulse 12s ease-in-out infinite alternate}
@keyframes bgPulse{from{filter:hue-rotate(0deg)}to{filter:hue-rotate(12deg)}}
.gradient-mesh{position:fixed;inset:0;z-index:1;pointer-events:none;opacity:0;background:radial-gradient(circle at 20% 30%,rgba(168,85,247,.14) 0%,transparent 40%),radial-gradient(circle at 80% 60%,rgba(34,211,238,.09) 0%,transparent 35%),radial-gradient(circle at 50% 80%,rgba(244,63,94,.07) 0%,transparent 40%);animation:meshFloat 9s ease-in-out infinite alternate;transition:opacity .5s}
.gradient-mesh.on{opacity:1}
@keyframes meshFloat{0%{background-position:0% 0%,100% 0%,50% 100%}100%{background-position:5% 5%,95% 5%,55% 95%}}
.scanlines{position:fixed;inset:0;z-index:2;pointer-events:none;background:repeating-linear-gradient(0deg,rgba(0,0,0,.022) 0px,rgba(0,0,0,.022) 1px,transparent 1px,transparent 3px);display:none}
.scanlines.on{display:block}
.neon-scanline{position:fixed;left:0;right:0;height:2px;z-index:3;pointer-events:none;background:linear-gradient(90deg,transparent,var(--accent),var(--accent2),var(--accent),transparent);box-shadow:0 0 18px var(--accent);animation:scanlineMove 4s linear infinite;display:none}
.neon-scanline.on{display:block}
@keyframes scanlineMove{from{top:-2px}to{top:100vh}}
#ptx{position:fixed;inset:0;z-index:2;pointer-events:none}
#aurora-canvas,#plasma-canvas{position:fixed;inset:0;width:100%;height:100%;z-index:1;pointer-events:none;opacity:0;transition:opacity 1s}
#aurora-canvas.on,#plasma-canvas.on{opacity:1}
#spotlight{position:fixed;inset:0;z-index:2;pointer-events:none;opacity:0;transition:opacity .5s;background:radial-gradient(circle 200px at 50% 50%,rgba(168,85,247,.08) 0%,transparent 100%)}
#spotlight.on{opacity:1}
#confetti-canvas{position:fixed;inset:0;z-index:4;pointer-events:none}

/* PAGE */
.page{position:relative;z-index:10;min-height:100vh;display:flex;align-items:center;justify-content:center;padding:50px 20px}

/* CARD */
.card{
  width:100%;max-width:460px;
  background:var(--card-bg);
  backdrop-filter:blur(32px) saturate(1.6);
  -webkit-backdrop-filter:blur(32px) saturate(1.6);
  border-radius:var(--radius);
  overflow:hidden;position:relative;
  box-shadow:0 0 0 1px rgba(255,255,255,.04),0 40px 100px rgba(0,0,0,.75),0 0 80px rgba(168,85,247,.05);
  animation:cardIn .9s cubic-bezier(.16,1,.3,1) both;
  transform-style:preserve-3d;
  border:1px solid rgba(255,255,255,.06);
}
@keyframes spinBorder{to{--spin:360deg}}
@keyframes cardIn{from{opacity:0;transform:translateY(36px) scale(.96)}to{opacity:1;transform:translateY(0) scale(1)}}

/* SPINNING CONIC GRADIENT BORDER ‚Äî always on, stunning */
@supports(background:conic-gradient(red,blue)){
  .card::before{
    content:'';position:absolute;inset:-1px;
    border-radius:calc(var(--radius) + 1px);
    background:conic-gradient(from var(--spin,0deg),
      transparent 20%,
      rgba(168,85,247,.9) 36%,rgba(34,211,238,.7) 50%,
      rgba(244,63,94,.6) 64%,rgba(251,191,36,.5) 72%,
      rgba(168,85,247,.9) 82%,transparent 92%
    );
    z-index:-1;animation:spinBorder 5s linear infinite;
  }
  .card.rainbow-border::before{
    background:conic-gradient(from var(--spin,0deg),#f43f5e,#f97316,#eab308,#22c55e,#06b6d4,#a855f7,#f43f5e)!important;
    animation:spinBorder 3s linear infinite!important;
  }
  .card.no-border::before{display:none}
  .card.glow-border::before{
    background:conic-gradient(from var(--spin,0deg),transparent 30%,var(--accent) 50%,transparent 70%)!important;
    filter:blur(2px);
  }
  .card.solid-border::before{display:none}
  .card.solid-border{border:1px solid var(--accent)!important}
  .card.neon-border-css::before{
    background:conic-gradient(from var(--spin,0deg),transparent 30%,var(--accent) 50%,transparent 70%)!important;
  }
  .card.fire-border::before{
    background:conic-gradient(from var(--spin,0deg),#f97316,#ef4444,#fbbf24,#f97316)!important;
    animation:spinBorder 2s linear infinite!important;
  }
  .card.electric-border::before{
    background:conic-gradient(from var(--spin,0deg),transparent 25%,#06b6d4 45%,#a855f7 55%,transparent 75%)!important;
    animation:spinBorder 2.5s linear infinite!important;
  }
}

/* BANNER */
.banner{height:148px;position:relative;overflow:hidden;background:linear-gradient(135deg,#0d0520,#0a1628,#150526)}
.banner canvas{position:absolute;inset:0;width:100%;height:100%;display:block}
.banner::after{content:'';position:absolute;bottom:0;left:0;right:0;height:80px;background:linear-gradient(transparent,rgba(5,5,10,.98));pointer-events:none;z-index:2}
.banner-overlay-text{position:absolute;inset:0;z-index:3;display:flex;align-items:center;justify-content:center;font-family:'Syne',sans-serif;font-size:1.1rem;font-weight:800;letter-spacing:.15em;text-transform:uppercase;color:rgba(255,255,255,.07);pointer-events:none;text-shadow:0 0 30px rgba(168,85,247,.18)}
.banner-marquee{position:absolute;bottom:12px;left:0;right:0;z-index:3;overflow:hidden;pointer-events:none}
.banner-marquee-inner{display:flex;gap:40px;white-space:nowrap;animation:marqueeScroll 18s linear infinite;font-size:.62rem;font-weight:700;letter-spacing:.12em;text-transform:uppercase;color:rgba(168,85,247,.45)}
@keyframes marqueeScroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}
.views-badge{position:absolute;top:12px;left:12px;z-index:6;background:rgba(0,0,0,.55);backdrop-filter:blur(8px);border:1px solid rgba(255,255,255,.09);padding:2px 8px;border-radius:100px;font-size:.6rem;color:rgba(255,255,255,.55);display:none;gap:4px;align-items:center}
.views-badge.show{display:flex}

/* LYRICS TICKER */
.lyrics-ticker{background:rgba(168,85,247,.06);border-top:1px solid rgba(168,85,247,.1);border-bottom:1px solid rgba(168,85,247,.08);overflow:hidden;padding:6px 0;display:none}
.lyrics-ticker.on{display:block}
.lyrics-ticker-inner{display:flex;white-space:nowrap;gap:60px;animation:marqueeScroll 22s linear infinite;font-size:.7rem;color:rgba(168,85,247,.65);letter-spacing:.04em}

/* AVATAR */
.avatar-wrap{position:relative;width:100px;height:100px;margin:-50px auto 0;display:flex;align-items:center;justify-content:center;z-index:5;animation:avatarFloat 3.8s ease-in-out infinite}
@keyframes avatarFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-7px)}}
.avatar{
  width:96px;height:96px;border-radius:50%;
  background:linear-gradient(135deg,var(--accent),var(--accent2),#f43f5e);
  display:flex;align-items:center;justify-content:center;
  font-size:2.8rem;line-height:1;
  border:3px solid rgba(168,85,247,.55);
  box-shadow:0 0 0 5px rgba(168,85,247,.08),0 0 30px rgba(168,85,247,.35),0 0 60px rgba(168,85,247,.1);
  overflow:hidden;user-select:none;
  transition:transform .28s ease,box-shadow .28s ease;
}
.avatar img{width:100%;height:100%;object-fit:cover}
.avatar:hover{transform:scale(1.1) rotate(-5deg);box-shadow:0 0 0 5px rgba(168,85,247,.2),0 0 44px rgba(168,85,247,.5),0 0 70px rgba(168,85,247,.18)}
.online-dot{position:absolute;bottom:3px;right:3px;width:18px;height:18px;background:#22c55e;border-radius:50%;border:3px solid var(--bg);animation:dotPulse 2.4s ease-in-out infinite}
@keyframes dotPulse{0%,100%{box-shadow:0 0 6px rgba(34,197,94,.5)}50%{box-shadow:0 0 18px rgba(34,197,94,.9),0 0 30px rgba(34,197,94,.22)}}
.online-dot.idle{background:#f59e0b;animation:none}
.online-dot.dnd{background:#ef4444;animation:none}
.online-dot.offline{background:#6b7280;animation:none}

/* CARD BODY */
.card-body{padding:16px 24px 26px}
.name-row{text-align:center;margin-bottom:4px}
.username{
  font-family:'Syne',sans-serif;font-size:1.72rem;font-weight:800;letter-spacing:-.025em;
  background:linear-gradient(135deg,#fff 18%,var(--accent) 58%,var(--accent2) 100%);
  -webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;
  background-size:200% 100%;animation:nameShimmer 4s ease-in-out infinite;display:inline-block;
}
@keyframes nameShimmer{0%,100%{background-position:0%}50%{background-position:100%}}
@keyframes glitchAnim{0%,96%{clip-path:none;transform:none}97%{clip-path:polygon(0 0,100% 0,100% 35%,0 35%);transform:translate(-3px,2px)}98%{clip-path:polygon(0 55%,100% 55%,100% 100%,0 100%);transform:translate(3px,-2px)}99%{clip-path:polygon(0 25%,100% 25%,100% 60%,0 60%);transform:translate(1px,1px)}100%{clip-path:none;transform:none}}
.glitch-active{animation:nameShimmer 4s ease-in-out infinite,glitchAnim 3s step-end infinite}
.username-shake{animation:nameShake 2.5s ease-in-out infinite!important}
@keyframes nameShake{0%,90%,100%{transform:translateX(0)}93%{transform:translateX(-5px) rotate(-1deg)}96%{transform:translateX(5px) rotate(1deg)}98%{transform:translateX(-3px)}}
.username-fuzzy{animation:nameFuzzy 3s step-end infinite!important}
@keyframes nameFuzzy{0%,89%,100%{text-shadow:none}90%{text-shadow:2px 0 var(--accent),-2px 0 var(--accent2);filter:blur(.4px)}92%{text-shadow:-3px 0 #f43f5e,3px 0 var(--accent2)}94%{text-shadow:2px 0 var(--accent);filter:blur(0)}96%{text-shadow:-2px 0 var(--accent2),2px 0 var(--accent);filter:blur(.6px)}}
.username-rainbow{-webkit-text-fill-color:unset!important;background:linear-gradient(90deg,#f43f5e,#f97316,#eab308,#22c55e,#06b6d4,#a855f7,#f43f5e)!important;background-size:200%!important;animation:nameShimmer 1.2s linear infinite,nameRainbow 2s linear infinite!important}
@keyframes nameRainbow{0%{filter:hue-rotate(0deg)}100%{filter:hue-rotate(360deg)}}
.username-wave span{display:inline-block;animation:waveChar .6s ease-in-out infinite}
@keyframes waveChar{0%,100%{transform:translateY(0)}50%{transform:translateY(-8px)}}

.pronouns{display:inline-block;background:rgba(168,85,247,.1);border:1px solid rgba(168,85,247,.28);color:var(--accent);font-size:.68rem;font-weight:700;letter-spacing:.07em;text-transform:uppercase;padding:2px 9px;border-radius:100px;margin-left:7px;vertical-align:middle}
.role-line{text-align:center;font-size:.74rem;color:var(--muted);margin-bottom:8px;letter-spacing:.02em}
.status-badge{display:block;width:fit-content;margin:0 auto 10px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.08);padding:3px 11px;border-radius:100px;font-size:.73rem;color:var(--text);text-align:center}
.location-line{text-align:center;font-size:.72rem;color:var(--muted);margin-bottom:10px;display:flex;align-items:center;justify-content:center;gap:5px}
.available-indicator{display:none;align-items:center;gap:5px;font-size:.66rem;font-weight:700;color:#22c55e;background:rgba(34,197,94,.08);border:1px solid rgba(34,197,94,.2);padding:3px 10px;border-radius:100px;margin:0 auto 8px;width:fit-content}
.available-indicator.on{display:flex}
.avail-dot{width:6px;height:6px;border-radius:50%;background:#22c55e;animation:dotPulse 2s ease-in-out infinite;flex-shrink:0}
.copy-username-btn{display:inline-flex;align-items:center;gap:5px;font-size:.65rem;color:var(--muted);cursor:pointer;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);padding:2px 8px;border-radius:100px;margin-top:4px;transition:all .18s;user-select:none}
.copy-username-btn:hover{color:var(--text);background:rgba(168,85,247,.1);border-color:rgba(168,85,247,.3)}
.section-title{font-size:.6rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:var(--muted);margin-bottom:8px;display:flex;align-items:center;gap:6px}
.section-title::after{content:'';flex:1;height:1px;background:rgba(255,255,255,.05)}

/* BADGES */
.badges-row{display:flex;gap:5px;flex-wrap:wrap;justify-content:center;margin-bottom:12px}
.badge{display:inline-flex;align-items:center;justify-content:center;font-size:.85rem;width:30px;height:30px;background:rgba(255,255,255,.05);border:1px solid rgba(255,255,255,.09);border-radius:8px;transition:transform .18s,background .18s;cursor:default;position:relative}
.badge:hover{transform:translateY(-3px) scale(1.15);background:rgba(255,255,255,.1)}
.badge-tooltip{position:absolute;bottom:calc(100% + 6px);left:50%;transform:translateX(-50%);background:rgba(8,8,18,.97);border:1px solid rgba(255,255,255,.1);color:var(--text);font-size:.62rem;font-weight:600;padding:4px 8px;border-radius:6px;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .15s;z-index:10}
.badge:hover .badge-tooltip{opacity:1}

/* TAGS & SKILLS */
.tags{display:flex;gap:5px;flex-wrap:wrap;justify-content:center;margin-bottom:14px}
.tag{font-size:.73rem;color:var(--muted);background:rgba(255,255,255,.035);border:1px solid rgba(255,255,255,.065);padding:3px 11px;border-radius:100px;transition:color .2s,border-color .2s;cursor:default}
.tag:hover{color:var(--text);border-color:rgba(255,255,255,.16)}
.skills-row{display:flex;gap:5px;flex-wrap:wrap;justify-content:center;margin-bottom:14px}
.skill-chip{font-size:.7rem;font-weight:600;padding:3px 10px;border-radius:100px;background:rgba(168,85,247,.09);border:1px solid rgba(168,85,247,.2);color:#c4b5fd;letter-spacing:.01em;transition:all .2s}
.skill-chip:hover{background:rgba(168,85,247,.2);transform:translateY(-2px);box-shadow:0 4px 12px rgba(168,85,247,.18)}
.skill-bars{margin-bottom:16px}
.skill-bar-row{margin-bottom:10px}
.skill-bar-label{display:flex;justify-content:space-between;font-size:.72rem;color:var(--muted);margin-bottom:4px}
.skill-bar-label span:last-child{color:var(--accent);font-weight:700}
.skill-bar-track{height:5px;background:rgba(255,255,255,.07);border-radius:100px;overflow:hidden}
.skill-bar-fill{height:100%;border-radius:100px;background:linear-gradient(90deg,var(--accent),var(--accent2));width:0%;transition:width 1.2s cubic-bezier(.16,1,.3,1);position:relative;overflow:hidden}
.skill-bar-fill::after{content:'';position:absolute;inset:0;background:linear-gradient(90deg,transparent 70%,rgba(255,255,255,.28) 100%);animation:barShine 2.2s ease-in-out infinite}
@keyframes barShine{0%,80%{opacity:0}90%{opacity:1}100%{opacity:0}}
.open-to-row{display:flex;gap:5px;flex-wrap:wrap;justify-content:center;margin-bottom:12px}
.open-chip{font-size:.65rem;font-weight:700;padding:2px 9px;border-radius:100px;background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.22);color:#86efac}

/* ACTIVITY TAGS */
.activity-tag{font-size:.7rem;font-weight:700;padding:2px 9px;border-radius:100px;display:inline-flex;align-items:center;gap:4px}
.activity-tag.green{background:rgba(34,197,94,.1);border:1px solid rgba(34,197,94,.22);color:#86efac}
.activity-tag.blue{background:rgba(59,130,246,.1);border:1px solid rgba(59,130,246,.22);color:#93c5fd}
.activity-tag.red{background:rgba(239,68,68,.1);border:1px solid rgba(239,68,68,.22);color:#fca5a5}
.activity-tag.orange{background:rgba(249,115,22,.1);border:1px solid rgba(249,115,22,.22);color:#fdba74}
.activity-tag.purple{background:rgba(168,85,247,.1);border:1px solid rgba(168,85,247,.22);color:#c4b5fd}

/* BIO */
.bio{text-align:center;font-size:.92rem;color:var(--muted);line-height:1.7;margin-bottom:18px;min-height:48px;display:flex;align-items:center;justify-content:center}
.tw{color:var(--text)}
.caret{display:inline-block;width:2px;height:.88em;background:var(--accent);margin-left:2px;vertical-align:text-bottom;animation:blink .7s step-end infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:0}}

/* QUOTE */
.quote-section{background:rgba(255,255,255,.025);border-left:3px solid var(--accent);border-radius:0 12px 12px 0;padding:12px 16px;margin-bottom:14px}
.quote-text{font-size:.84rem;color:var(--text);font-style:italic;line-height:1.6}
.quote-attr{font-size:.68rem;color:var(--muted);margin-top:6px}

/* TIMELINE */
.timeline{margin-bottom:18px}
.timeline-title{font-size:.65rem;font-weight:700;text-transform:uppercase;letter-spacing:.12em;color:var(--muted);margin-bottom:10px}
.timeline-item{display:flex;gap:12px;margin-bottom:12px;position:relative}
.timeline-item::before{content:'';position:absolute;left:11px;top:22px;bottom:-12px;width:1px;background:rgba(168,85,247,.14)}
.timeline-item:last-child::before{display:none}
.timeline-dot{width:24px;height:24px;border-radius:50%;background:rgba(168,85,247,.13);border:2px solid rgba(168,85,247,.35);display:flex;align-items:center;justify-content:center;font-size:.65rem;flex-shrink:0}
.timeline-content{flex:1}
.timeline-event{font-size:.8rem;font-weight:600;color:var(--text)}
.timeline-date{font-size:.65rem;color:var(--muted);margin-top:1px}
.timeline-desc{font-size:.72rem;color:var(--muted);margin-top:2px;line-height:1.4}

/* PROJECT CARD */
.project-card{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.07);border-radius:14px;padding:12px 16px;margin-bottom:14px;transition:border-color .2s}
.project-card:hover{border-color:rgba(168,85,247,.28)}
.project-top{display:flex;align-items:center;justify-content:space-between;margin-bottom:5px}
.project-status{font-size:.64rem;font-weight:700;color:var(--accent);letter-spacing:.02em}
.project-label{font-size:.58rem;color:var(--muted);text-transform:uppercase;letter-spacing:.09em}
.project-name{font-size:.92rem;font-weight:700;margin-bottom:3px}
.project-desc{font-size:.74rem;color:var(--muted);line-height:1.5}
.project-link{display:inline-block;margin-top:6px;font-size:.68rem;color:var(--accent);text-decoration:none;opacity:.8;transition:opacity .2s}
.project-link:hover{opacity:1}

/* MUSIC PLAYER */
.music-player{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.065);border-radius:16px;padding:13px 15px 15px;display:flex;align-items:center;gap:13px;margin-bottom:14px;position:relative;overflow:hidden;transition:border-color .2s}
.music-player:hover{border-color:rgba(168,85,247,.3)}
.prog-bg{position:absolute;bottom:0;left:0;height:3px;width:100%;background:rgba(255,255,255,.05)}
.prog{position:absolute;bottom:0;left:0;height:3px;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent2));border-radius:0 2px 2px 0;transition:width .5s linear}
.waveform-bars{display:flex;align-items:flex-end;gap:2px;height:24px;flex-shrink:0}
.wave-bar{width:3px;background:linear-gradient(to top,var(--accent),var(--accent2));border-radius:2px;animation:wavePulse 1.2s ease-in-out infinite}
.wave-bar:nth-child(1){height:8px;animation-delay:0s}.wave-bar:nth-child(2){height:14px;animation-delay:.1s}.wave-bar:nth-child(3){height:20px;animation-delay:.2s}.wave-bar:nth-child(4){height:16px;animation-delay:.05s}.wave-bar:nth-child(5){height:10px;animation-delay:.15s}
@keyframes wavePulse{0%,100%{transform:scaleY(.5);opacity:.6}50%{transform:scaleY(1);opacity:1}}
.waveform-bars.paused .wave-bar{animation-play-state:paused}
.album{width:48px;height:48px;border-radius:11px;background:linear-gradient(135deg,#2d1060,#0c2a50);display:flex;align-items:center;justify-content:center;font-size:1.3rem;flex-shrink:0;overflow:hidden;transition:box-shadow .2s}
.album img{width:100%;height:100%;object-fit:cover;border-radius:11px}
.album.spin{animation:aSpin 8s linear infinite}
@keyframes aSpin{to{transform:rotate(360deg)}}
.minfo{flex:1;min-width:0}
.mtitle{font-size:.87rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.martist{font-size:.74rem;color:var(--muted);margin-top:2px}
.mcontrols{display:flex;gap:8px;align-items:center}
.mbtn{width:34px;height:34px;border-radius:50%;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.86rem;background:rgba(255,255,255,.07);color:#fff;transition:transform .15s,background .2s;flex-shrink:0}
.mbtn:hover{transform:scale(1.12);background:rgba(255,255,255,.13)}
.mbtn.play{background:var(--accent)!important;box-shadow:0 0 16px rgba(168,85,247,.4);width:40px;height:40px;font-size:1rem}

/* STATS */
.stats{display:flex;gap:1px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.06);border-radius:14px;overflow:hidden;margin-bottom:16px}
.stat{flex:1;padding:12px 8px;background:rgba(10,10,20,.6);text-align:center;transition:background .2s;cursor:default}
.stat:hover{background:rgba(168,85,247,.07)}
.snum{font-family:'Syne',sans-serif;font-size:1.22rem;font-weight:800;color:var(--accent)}
.slabel{font-size:.66rem;color:var(--muted);margin-top:3px}

/* REACTIONS */
.reaction-bar{display:flex;gap:6px;flex-wrap:wrap;justify-content:center;margin-bottom:14px}
.reaction{display:flex;align-items:center;gap:4px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);border-radius:100px;padding:4px 10px;font-size:.8rem;cursor:pointer;transition:all .18s;user-select:none}
.reaction:hover{background:rgba(168,85,247,.1);border-color:rgba(168,85,247,.28);transform:scale(1.07)}
.reaction.reacted{background:rgba(168,85,247,.14);border-color:rgba(168,85,247,.38)}
.reaction.pop{animation:reactionPop .3s cubic-bezier(.16,1,.3,1)}
@keyframes reactionPop{0%{transform:scale(1)}50%{transform:scale(1.35)}100%{transform:scale(1)}}
.reaction-count{font-size:.7rem;color:var(--muted)}
.float-reaction{position:fixed;z-index:5;pointer-events:none;font-size:1.5rem;animation:floatUp 2.5s ease-out forwards}
@keyframes floatUp{0%{opacity:1;transform:translateY(0) scale(1)}100%{opacity:0;transform:translateY(-120px) scale(1.4)}}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DISCORD SERVER WIDGET ‚Äî guns.lol/joe style
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.discord-server-widget {
  display:flex;align-items:center;gap:12px;
  background:linear-gradient(135deg,rgba(88,101,242,.1) 0%,rgba(88,101,242,.04) 100%);
  border:1px solid rgba(88,101,242,.22);
  border-radius:var(--inner-r);padding:12px 14px;margin-bottom:14px;
  position:relative;overflow:hidden;transition:all .22s;
}
.discord-server-widget::before{
  content:'Discord';position:absolute;top:8px;right:12px;
  font-size:.49rem;font-weight:800;letter-spacing:.14em;
  color:rgba(165,180,252,.22);font-family:'Space Mono',monospace;
  text-transform:uppercase;pointer-events:none;
}
.discord-server-widget:hover{
  border-color:rgba(88,101,242,.42);
  background:linear-gradient(135deg,rgba(88,101,242,.16) 0%,rgba(88,101,242,.07) 100%);
  transform:translateY(-1px);box-shadow:0 8px 28px rgba(88,101,242,.15);
}
.dsw-icon{
  width:46px;height:46px;border-radius:13px;flex-shrink:0;
  background:linear-gradient(135deg,#5865f2,#7289da);
  display:flex;align-items:center;justify-content:center;
  overflow:hidden;box-shadow:0 4px 14px rgba(88,101,242,.35);
}
.dsw-icon img{width:100%;height:100%;object-fit:cover;border-radius:13px}
.dsw-info{flex:1;min-width:0}
.dsw-name{font-size:.88rem;font-weight:700;color:#e2e8f0;margin-bottom:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.dsw-meta{font-size:.68rem;color:#6b7280;display:flex;align-items:center;gap:5px}
.dsw-dot{display:inline-block;width:7px;height:7px;border-radius:50%;flex-shrink:0}
.dsw-dot.online{background:#22c55e;box-shadow:0 0 6px rgba(34,197,94,.7);animation:dotPulse 2s ease-in-out infinite}
.dsw-dot.offline{background:#6b7280}
.dsw-join{
  flex-shrink:0;padding:7px 17px;border-radius:9px;
  background:#57f287;color:#000;font-weight:800;font-size:.76rem;
  text-decoration:none;transition:all .18s;letter-spacing:.01em;
  box-shadow:0 4px 14px rgba(87,242,135,.28);
}
.dsw-join:hover{background:#3bdb6d;transform:translateY(-1px);box-shadow:0 6px 20px rgba(87,242,135,.45)}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DISCORD PROFILE CARD ‚Äî koraz style
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.discord-profile-card{
  display:none;position:relative;overflow:hidden;
  background:linear-gradient(135deg,rgba(88,101,242,.12) 0%,rgba(114,137,218,.06) 100%);
  border:1px solid rgba(88,101,242,.25);
  border-radius:var(--inner-r);padding:16px;margin-bottom:14px;gap:14px;
  align-items:center;transition:all .25s;
  box-shadow:0 0 0 1px rgba(88,101,242,.05),0 8px 32px rgba(88,101,242,.09);
}
.discord-profile-card::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 0% 100%,rgba(88,101,242,.1) 0%,transparent 65%);pointer-events:none}
.discord-profile-card::after{content:'DISCORD';position:absolute;top:10px;right:13px;font-size:.5rem;font-weight:800;letter-spacing:.13em;color:rgba(165,180,252,.25);font-family:'Space Mono',monospace;pointer-events:none}
.discord-profile-card.show{display:flex}
.discord-profile-card:hover{border-color:rgba(88,101,242,.45);transform:translateY(-1px);box-shadow:0 0 0 1px rgba(88,101,242,.09),0 12px 40px rgba(88,101,242,.16)}
.discord-pfp-wrap{position:relative;flex-shrink:0}
.discord-pfp{
  width:58px;height:58px;border-radius:50%;overflow:hidden;
  background:linear-gradient(135deg,#5865f2,#7289da);
  display:flex;align-items:center;justify-content:center;font-size:1.5rem;
  border:2.5px solid rgba(88,101,242,.55);
  box-shadow:0 0 0 4px rgba(88,101,242,.09),0 0 20px rgba(88,101,242,.18);
  transition:box-shadow .2s;
}
.discord-profile-card:hover .discord-pfp{box-shadow:0 0 0 4px rgba(88,101,242,.2),0 0 28px rgba(88,101,242,.38)}
.discord-pfp img{width:100%;height:100%;object-fit:cover}
.discord-pfp-status{position:absolute;bottom:1px;right:1px;width:16px;height:16px;border-radius:50%;border:3px solid rgba(5,5,10,.97)}
.discord-pfp-status.online{background:#22c55e;box-shadow:0 0 8px rgba(34,197,94,.8);animation:onlinePulse 2s ease-in-out infinite}
.discord-pfp-status.idle{background:#f59e0b;box-shadow:0 0 6px rgba(245,158,11,.5)}
.discord-pfp-status.dnd{background:#ef4444;box-shadow:0 0 6px rgba(239,68,68,.5)}
.discord-pfp-status.offline{background:#4b5563}
@keyframes onlinePulse{0%,100%{box-shadow:0 0 8px rgba(34,197,94,.8)}50%{box-shadow:0 0 16px rgba(34,197,94,1),0 0 28px rgba(34,197,94,.3)}}
.discord-pfp-info{flex:1;min-width:0;position:relative;z-index:1}
.discord-pfp-name{font-size:.9rem;font-weight:700;color:#e8eaf6;display:flex;align-items:center;gap:6px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.discord-pfp-tag{font-size:.6rem;color:rgba(165,180,252,.45);font-weight:400}
.discord-pfp-status-txt{font-size:.73rem;color:#8b9df7;margin-top:4px;display:flex;align-items:center;gap:5px;font-weight:500}
.discord-pfp-status-txt::before{content:'';width:7px;height:7px;border-radius:50%;background:#22c55e;flex-shrink:0}
.discord-pfp-status-txt.idle::before{background:#f59e0b}.discord-pfp-status-txt.dnd::before{background:#ef4444}.discord-pfp-status-txt.offline::before{background:#4b5563}
.discord-pfp-status-txt.idle{color:#fbbf24}.discord-pfp-status-txt.dnd{color:#f87171}.discord-pfp-status-txt.offline{color:#6b7280}
.discord-custom-status{font-size:.69rem;color:rgba(255,255,255,.38);margin-top:4px;display:flex;align-items:center;gap:5px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   DISCORD RICH PRESENCE
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.dc-presence{background:rgba(88,101,242,.07);border:1px solid rgba(88,101,242,.18);border-radius:14px;padding:12px 14px;margin-bottom:14px;display:none}
.dc-presence.show{display:flex;gap:10px;align-items:flex-start}
.dc-presence-img{width:46px;height:46px;border-radius:9px;flex-shrink:0;background:rgba(88,101,242,.18);display:flex;align-items:center;justify-content:center;font-size:1.4rem;overflow:hidden;position:relative}
.dc-presence-img img{width:100%;height:100%;object-fit:cover;border-radius:9px}
.dc-presence-small{position:absolute;bottom:-4px;right:-4px;width:18px;height:18px;border-radius:4px;background:#1e1f22;border:2px solid #1e1f22;overflow:hidden}
.dc-presence-small img{width:100%;height:100%;object-fit:cover}
.dc-presence-info{flex:1;min-width:0}
.dc-presence-state{font-size:.65rem;font-weight:700;text-transform:uppercase;letter-spacing:.08em;color:rgba(165,180,252,.65);margin-bottom:2px}
.dc-presence-name{font-size:.83rem;font-weight:600;color:#e2e8f0;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.dc-presence-detail{font-size:.72rem;color:#6b7280;margin-top:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.dc-presence-time{font-size:.62rem;color:#4b5563;margin-top:2px}

/* ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
   SPOTIFY NOW PLAYING
   ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê */
.spotify-card{display:none;position:relative;overflow:hidden;background:linear-gradient(135deg,rgba(30,215,96,.08) 0%,rgba(30,215,96,.03) 100%);border:1px solid rgba(30,215,96,.18);border-radius:var(--inner-r);padding:14px 16px;margin-bottom:14px;gap:14px;align-items:center;box-shadow:0 0 0 1px rgba(30,215,96,.04),0 8px 24px rgba(30,215,96,.07);transition:all .25s}
.spotify-card.show{display:flex}
.spotify-card::before{content:'';position:absolute;inset:0;background:radial-gradient(ellipse at 0% 100%,rgba(30,215,96,.09),transparent 60%);pointer-events:none}
.spotify-card:hover{border-color:rgba(30,215,96,.32);transform:translateY(-1px);box-shadow:0 12px 36px rgba(30,215,96,.12)}
.spotify-album{width:48px;height:48px;border-radius:8px;flex-shrink:0;overflow:hidden;background:rgba(30,215,96,.14);display:flex;align-items:center;justify-content:center;font-size:1.2rem}
.spotify-album img{width:100%;height:100%;object-fit:cover;border-radius:8px}
.spotify-info{flex:1;min-width:0}
.spotify-label{font-size:.6rem;font-weight:700;text-transform:uppercase;letter-spacing:.1em;color:#1ed760;margin-bottom:2px;display:flex;align-items:center;gap:5px}
.spotify-song{font-size:.84rem;font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.spotify-artist{font-size:.7rem;color:var(--muted);margin-top:1px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.spotify-bars{display:flex;align-items:flex-end;gap:2px;height:20px;flex-shrink:0}
.sp-bar{width:3px;border-radius:2px;background:#1ed760;animation:spBarAnim 1.2s ease-in-out infinite}
.sp-bar:nth-child(1){height:7px;animation-delay:0s}.sp-bar:nth-child(2){height:13px;animation-delay:.15s}.sp-bar:nth-child(3){height:19px;animation-delay:.08s}.sp-bar:nth-child(4){height:10px;animation-delay:.22s}
@keyframes spBarAnim{0%,100%{transform:scaleY(.3);opacity:.6}50%{transform:scaleY(1);opacity:1}}

/* DISCORD BADGE */
.dc-badge{display:inline-flex;align-items:center;gap:6px;background:rgba(88,101,242,.1);border:1px solid rgba(88,101,242,.22);padding:5px 12px;border-radius:100px;font-size:.75rem;color:#a5b4fc;margin-bottom:13px}
.dc-status-dot{width:10px;height:10px;border-radius:50%;flex-shrink:0}
.dc-status-dot.online{background:#22c55e;box-shadow:0 0 6px rgba(34,197,94,.6);animation:dotPulse 2s ease-in-out infinite}
.dc-status-dot.idle{background:#f59e0b}.dc-status-dot.dnd{background:#ef4444}.dc-status-dot.offline{background:#6b7280}

/* GITHUB */
.github-widget{background:rgba(255,255,255,.024);border:1px solid rgba(255,255,255,.07);border-radius:14px;padding:14px;margin-bottom:14px}
.github-widget-header{display:flex;align-items:center;gap:8px;margin-bottom:10px}
.github-widget-user{font-size:.82rem;font-weight:600;color:var(--text)}
.github-widget-sub{font-size:.66rem;color:var(--muted);margin-left:auto}
.github-contrib{display:flex;gap:2px;overflow:hidden}
.github-contrib-col{display:flex;flex-direction:column;gap:2px}
.gh-day{width:10px;height:10px;border-radius:2px;background:rgba(255,255,255,.05);transition:background .2s}
.gh-day[data-level="1"]{background:rgba(168,85,247,.25)}
.gh-day[data-level="2"]{background:rgba(168,85,247,.5)}
.gh-day[data-level="3"]{background:rgba(168,85,247,.75)}
.gh-day[data-level="4"]{background:var(--accent);box-shadow:0 0 4px var(--accent)}
.github-stats-row{display:flex;gap:14px;margin-top:10px;font-size:.68rem;color:var(--muted)}
.github-stat{display:flex;align-items:center;gap:4px}
.github-stat-num{color:var(--accent);font-weight:700}

/* SOCIALS */
.socials{display:flex;gap:9px;flex-wrap:wrap;justify-content:center;margin-bottom:14px}
.soc{display:flex;align-items:center;justify-content:center;width:50px;height:50px;border-radius:13px;background:rgba(255,255,255,.044);border:1px solid rgba(255,255,255,.08);transition:transform .18s,border-color .2s,box-shadow .2s;position:relative;text-decoration:none;flex-shrink:0}
.soc:hover{transform:translateY(-4px) scale(1.1);border-color:rgba(168,85,247,.42);box-shadow:0 8px 24px rgba(0,0,0,.32)}
.soc img{width:26px;height:26px;object-fit:contain;border-radius:4px}
.soc .fallback{font-size:1.4rem}
.soc-tip{position:absolute;bottom:calc(100% + 7px);left:50%;transform:translateX(-50%);background:rgba(10,10,20,.97);border:1px solid rgba(255,255,255,.1);color:var(--text);font-size:.7rem;font-weight:600;padding:4px 10px;border-radius:7px;white-space:nowrap;opacity:0;pointer-events:none;transition:opacity .15s}
.soc:hover .soc-tip{opacity:1}
.soc .ripple{position:absolute;border-radius:50%;background:rgba(168,85,247,.28);width:100%;height:100%;animation:rippleOut .5s ease-out forwards;pointer-events:none}
@keyframes rippleOut{0%{transform:scale(0);opacity:.6}100%{transform:scale(3);opacity:0}}
.link-buttons{display:flex;flex-direction:column;gap:7px;margin-bottom:14px}
.link-btn{display:flex;align-items:center;gap:10px;padding:10px 14px;border-radius:11px;background:rgba(255,255,255,.04);border:1px solid rgba(255,255,255,.07);text-decoration:none;color:var(--text);font-size:.84rem;font-weight:500;transition:all .18s}
.link-btn:hover{background:rgba(168,85,247,.1);border-color:rgba(168,85,247,.32);transform:translateX(3px)}
.link-btn img{width:22px;height:22px;object-fit:contain;border-radius:4px;flex-shrink:0}
.link-btn span{flex:1}

/* WEATHER */
.weather-widget{display:flex;align-items:center;gap:10px;background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.07);border-radius:12px;padding:10px 14px;margin-bottom:12px}
.weather-icon{font-size:1.6rem}
.weather-temp{font-size:1rem;font-weight:700;color:var(--text)}
.weather-desc{font-size:.68rem;color:var(--muted);margin-top:1px}
.weather-loc{font-size:.62rem;color:var(--muted)}

/* FOOTER */
.card-foot{padding:12px 24px;border-top:1px solid rgba(255,255,255,.042);display:flex;align-items:center;justify-content:space-between}
.credit{font-size:.75rem;color:var(--muted);text-decoration:none;display:flex;align-items:center;gap:5px;transition:color .2s}
.credit:hover{color:var(--accent)}
.vcnt{font-size:.75rem;color:var(--muted)}

/* SHARE */
.share-card-btn{display:flex;align-items:center;justify-content:center;gap:7px;width:100%;padding:8px;border-radius:10px;background:rgba(168,85,247,.07);border:1px solid rgba(168,85,247,.16);color:var(--accent);font-size:.76rem;font-weight:600;cursor:pointer;margin-bottom:12px;transition:all .18s}
.share-card-btn:hover{background:rgba(168,85,247,.13);border-color:rgba(168,85,247,.38)}
.share-modal-overlay{position:fixed;inset:0;background:rgba(0,0,0,.85);backdrop-filter:blur(14px);z-index:200;display:none;align-items:center;justify-content:center;padding:20px}
.share-modal-overlay.show{display:flex}
.share-modal{background:rgba(15,15,26,.97);border:1px solid rgba(168,85,247,.2);border-radius:20px;padding:24px;max-width:380px;width:100%;text-align:center}
.share-card-preview{background:linear-gradient(135deg,rgba(168,85,247,.14),rgba(34,211,238,.09));border-radius:14px;padding:20px;margin-bottom:16px;position:relative;overflow:hidden}
.share-card-preview::before{content:'';position:absolute;inset:0;background:radial-gradient(circle at 30% 50%,rgba(168,85,247,.1),transparent 60%)}
.share-profile-name{font-family:'Syne',sans-serif;font-size:1.4rem;font-weight:800;margin-bottom:4px}
.share-url{font-size:.75rem;color:rgba(168,85,247,.8);margin-bottom:8px;font-family:monospace}
.share-actions{display:flex;gap:8px;justify-content:center;flex-wrap:wrap}
.share-btn{padding:8px 16px;border-radius:8px;border:none;cursor:pointer;font-size:.78rem;font-weight:600;font-family:'Outfit',sans-serif;transition:all .18s}
.share-btn.copy{background:var(--accent);color:#fff}
.share-btn.close{background:rgba(255,255,255,.07);color:var(--muted);border:1px solid rgba(255,255,255,.09)}

/* TOAST */
.toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%) translateY(80px);background:rgba(12,12,22,.97);backdrop-filter:blur(20px);border:1px solid rgba(168,85,247,.28);color:var(--text);padding:11px 22px;border-radius:12px;font-size:.85rem;font-weight:500;transition:transform .38s cubic-bezier(.16,1,.3,1),opacity .38s;z-index:9999;pointer-events:none;opacity:0;white-space:nowrap}
.toast.show{transform:translateX(-50%) translateY(0);opacity:1}

/* 404 */
.notfound{text-align:center;padding:60px 20px}
.notfound h1{font-family:'Syne',sans-serif;font-size:5rem;font-weight:800;color:var(--accent);margin-bottom:10px}
.notfound p{color:var(--muted);margin-bottom:20px}
.notfound a{color:var(--accent);text-decoration:none;border:1px solid rgba(168,85,247,.3);padding:10px 22px;border-radius:9px;transition:background .2s}
.notfound a:hover{background:rgba(168,85,247,.1)}

/* CARD SKINS */
.skin-frosted{background:rgba(255,255,255,.06)!important;backdrop-filter:blur(44px) saturate(2)!important}
.skin-solid{background:#0d0d1a!important;backdrop-filter:none!important}
.skin-neon{border-color:var(--accent)!important;box-shadow:0 0 0 1px var(--accent),0 0 40px rgba(168,85,247,.18),0 40px 90px rgba(0,0,0,.7)!important}
.skin-terminal{background:rgba(0,8,0,.96)!important;border-color:rgba(0,255,65,.3)!important}
.layout-modern .banner{display:none}
.layout-modern .avatar-wrap{margin-top:28px}
.layout-wide{max-width:600px!important}
.mono-icons .soc img,.mono-icons .link-btn img{filter:grayscale(1)}
.mono-icons .soc:hover img,.mono-icons .link-btn:hover img{filter:grayscale(0)}

/* VISITOR MAP */
.visitor-map{background:rgba(255,255,255,.03);border:1px solid rgba(255,255,255,.07);border-radius:12px;padding:12px;margin-bottom:14px;text-align:center}
.visitor-map-title{font-size:.65rem;text-transform:uppercase;letter-spacing:.1em;color:var(--muted);margin-bottom:8px}
.visitor-map-grid{display:grid;grid-template-columns:repeat(20,1fr);gap:2px;opacity:.7}
.vmap-dot{width:100%;aspect-ratio:1;border-radius:1px;background:rgba(168,85,247,.1)}
.vmap-dot.active{background:var(--accent);box-shadow:0 0 4px var(--accent)}
.visitor-map-caption{font-size:.62rem;color:var(--muted);margin-top:6px}

/* ANIMATED LOGO WATERMARK */
.animated-logo{position:absolute;top:14px;right:14px;z-index:6;font-family:'Syne',sans-serif;font-size:.6rem;font-weight:800;letter-spacing:.12em;text-transform:uppercase;background:linear-gradient(135deg,var(--accent),var(--accent2));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;animation:logoFlicker 6s ease-in-out infinite;user-select:none}
@keyframes logoFlicker{0%,90%,100%{opacity:.32}95%{opacity:1}}

/* MODE TOGGLE */
.mode-toggle{position:fixed;top:16px;right:16px;z-index:100;width:36px;height:36px;border-radius:50%;background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.1);cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:.9rem;transition:all .2s;backdrop-filter:blur(10px)}
.mode-toggle:hover{background:rgba(168,85,247,.2);border-color:rgba(168,85,247,.4);transform:scale(1.1)}

/* RAIN ANIMATION */
@keyframes rainDrop{0%{transform:translateY(-30px) rotate(0deg);opacity:0}8%{opacity:1}90%{opacity:.35}100%{transform:translateY(110vh) rotate(540deg);opacity:0}}

/* VOLUME */
.volume-control{display:none;align-items:center;gap:8px;position:absolute;right:14px;bottom:14px}
.volume-control.show{display:flex}
.vol-btn{font-size:.8rem;cursor:pointer;color:var(--muted);transition:color .2s;background:none;border:none}
.vol-btn:hover{color:var(--text)}
.vol-slider{-webkit-appearance:none;width:60px;height:3px;border-radius:2px;background:rgba(255,255,255,.14);outline:none;cursor:pointer}
.vol-slider::-webkit-slider-thumb{-webkit-appearance:none;width:12px;height:12px;border-radius:50%;background:var(--accent);cursor:pointer}

/* PROFILE TABS */
.profile-tabs{display:flex;gap:0;border-bottom:1px solid rgba(255,255,255,.07);margin-bottom:14px}
.profile-tab{flex:1;padding:8px;text-align:center;font-size:.72rem;font-weight:600;color:var(--muted);cursor:pointer;border-bottom:2px solid transparent;transition:color .18s,border-color .18s;margin-bottom:-1px}
.profile-tab.active{color:var(--accent);border-bottom-color:var(--accent)}
.tab-panel{display:none}
.tab-panel.active{display:block}

/* NEON GLOW TEXT */
.neon-glow{text-shadow:0 0 10px var(--accent),0 0 20px var(--accent),0 0 40px var(--accent)}

@media(max-width:500px){
  .card{border-radius:20px}
  .card-body{padding:14px 18px 22px}
  .socials{gap:7px}
}
</style>
</head>
<body>
<div id="cur"></div>
<div id="cur-trail"></div>
<canvas id="aurora-canvas"></canvas>
<canvas id="plasma-canvas"></canvas>
<div id="spotlight"></div>
<video id="bg-video" autoplay muted loop playsinline style="display:none"></video>
<img id="bg-image" alt="">
<div class="bg-overlay" id="bgLayer"></div>
<div class="gradient-mesh" id="gradientMesh"></div>
<div class="scanlines" id="scanlines"></div>
<div class="neon-scanline" id="neonScanline"></div>
<canvas id="ptx"></canvas>
<canvas id="confetti-canvas"></canvas>

<button class="mode-toggle" id="modeToggle" onclick="toggleDarkLight()" title="Toggle theme">üåô</button>

<div class="page">
  <div class="card" id="card">
    <div class="animated-logo" id="animLogo"></div>
    <div class="views-badge" id="viewsBadge">üëÅ <span id="viewsBadgeNum">‚Äî</span></div>
    <div class="banner" id="profileBanner">
      <canvas id="bnr"></canvas>
      <div class="banner-overlay-text" id="bannerText"></div>
      <div class="banner-marquee" id="bannerMarquee" style="display:none">
        <div class="banner-marquee-inner" id="bannerMarqueeInner"></div>
      </div>
    </div>

    <div class="lyrics-ticker" id="lyricsTicker">
      <div class="lyrics-ticker-inner" id="lyricsTickerInner"></div>
    </div>

    <div class="avatar-wrap" id="avWrap">
      <div class="avatar" id="av">üëæ</div>
      <div class="online-dot" id="onlineDot"></div>
    </div>

    <div class="card-body">
      <div class="available-indicator" id="availableIndicator">
        <div class="avail-dot"></div>Available for work
      </div>

      <div class="name-row">
        <span class="username" id="profileUsername">Loading...</span>
        <span class="pronouns" id="profilePronouns" style="display:none"></span>
      </div>
      <div style="text-align:center;margin-bottom:6px">
        <span class="copy-username-btn" id="copyUsernameBtn" onclick="copyUsername()" style="display:none">
          <span>üìã</span><span id="copyUsernameTxt">copy username</span>
        </span>
      </div>

      <div id="profileRole" class="role-line" style="display:none"></div>
      <div id="profileStatus" class="status-badge" style="display:none"></div>
      <div id="profileLocation" class="location-line" style="display:none"></div>
      <div class="badges-row" id="profileBadges" style="display:none"></div>
      <div id="activityTagsRow" style="display:flex;gap:5px;flex-wrap:wrap;justify-content:center;margin-bottom:10px"></div>
      <div class="tags" id="profileTags"></div>
      <div class="bio"><div><span class="tw" id="tw"></span><span class="caret"></span></div></div>

      <div class="skill-bars" id="profileSkillBars" style="display:none"></div>
      <div class="skills-row" id="profileSkills" style="display:none"></div>
      <div class="open-to-row" id="profileOpenTo" style="display:none"></div>

      <div class="timeline" id="profileTimeline" style="display:none">
        <div class="timeline-title">‚ú¶ Timeline</div>
        <div id="timelineItems"></div>
      </div>
      <div class="quote-section" id="profileQuote" style="display:none">
        <div class="quote-text" id="quoteText"></div>
        <div class="quote-attr" id="quoteAttr"></div>
      </div>
      <div class="project-card" id="profileProject" style="display:none">
        <div class="project-top">
          <span class="project-status" id="projStatus">üî® Building</span>
          <span class="project-label">current project</span>
        </div>
        <div class="project-name" id="projName"></div>
        <div class="project-desc" id="projDesc"></div>
        <a class="project-link" id="projLink" href="#" target="_blank" rel="noopener" style="display:none">View Project ‚Üí</a>
      </div>

      <!-- MUSIC PLAYER -->
      <div class="music-player" id="musicPlayer" style="display:none">
        <div class="prog-bg"><div class="prog" id="prog"></div></div>
        <div class="waveform-bars paused" id="waveformBars">
          <div class="wave-bar"></div><div class="wave-bar"></div>
          <div class="wave-bar"></div><div class="wave-bar"></div>
          <div class="wave-bar"></div>
        </div>
        <div class="album" id="alb">üéµ</div>
        <div class="minfo">
          <div class="mtitle" id="mtitle">Loading...</div>
          <div class="martist" id="mart"></div>
        </div>
        <div class="mcontrols">
          <button class="mbtn" onclick="prevTrack()">‚èÆ</button>
          <button class="mbtn play" id="playBtn" onclick="togglePlay()">‚ñ∂</button>
          <button class="mbtn" onclick="nextTrack()">‚è≠</button>
        </div>
        <div class="volume-control" id="volumeControl">
          <button class="vol-btn" id="volMuteBtn" onclick="toggleMute()">üîä</button>
          <input class="vol-slider" type="range" min="0" max="100" value="80" id="volSlider" oninput="setVolume(this.value)">
        </div>
      </div>

      <div class="weather-widget" id="weatherWidget" style="display:none">
        <div class="weather-icon" id="weatherIcon">üå§</div>
        <div class="weather-info">
          <div class="weather-temp" id="weatherTemp">‚Äî</div>
          <div class="weather-desc" id="weatherDesc">Loading...</div>
          <div class="weather-loc" id="weatherLoc"></div>
        </div>
      </div>

      <!-- STATS -->
      <div class="stats" id="statsRow">
        <div class="stat"><div class="snum" id="vcnt">0</div><div class="slabel">profile views</div></div>
        <div class="stat"><div class="snum" id="statFollowers">0</div><div class="slabel">followers</div></div>
        <div class="stat"><div class="snum" id="statClicks">0</div><div class="slabel">link clicks</div></div>
      </div>

      <div class="visitor-map" id="visitorMap" style="display:none">
        <div class="visitor-map-title">üåç Visitor Origins</div>
        <div class="visitor-map-grid" id="visitorMapGrid"></div>
        <div class="visitor-map-caption">Visitors from across the globe</div>
      </div>

      <!-- REACTION BAR -->
      <div class="reaction-bar" id="reactionBar" style="display:none">
        <div class="reaction" data-emoji="üî•" onclick="addReaction(this)">üî• <span class="reaction-count" id="rc-fire">0</span></div>
        <div class="reaction" data-emoji="‚ù§Ô∏è" onclick="addReaction(this)">‚ù§Ô∏è <span class="reaction-count" id="rc-heart">0</span></div>
        <div class="reaction" data-emoji="üëë" onclick="addReaction(this)">üëë <span class="reaction-count" id="rc-crown">0</span></div>
        <div class="reaction" data-emoji="‚ú®" onclick="addReaction(this)">‚ú® <span class="reaction-count" id="rc-sparkle">0</span></div>
        <div class="reaction" data-emoji="üéØ" onclick="addReaction(this)">üéØ <span class="reaction-count" id="rc-target">0</span></div>
      </div>

      <button class="share-card-btn" id="shareCardBtn" onclick="showShareCard()" style="display:none">
        ü™Ñ Share this profile
      </button>

      <!-- DISCORD PROFILE CARD (koraz-style) -->
      <div class="discord-profile-card" id="discordProfileCard">
        <div class="discord-pfp-wrap">
          <div class="discord-pfp" id="discordPfp">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="#7289da"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/></svg>
          </div>
          <div class="discord-pfp-status offline" id="discordPfpStatus"></div>
        </div>
        <div class="discord-pfp-info">
          <div class="discord-pfp-name" id="discordPfpName">
            <svg width="13" height="13" viewBox="0 0 24 24" fill="#5865F2"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/></svg>
            <span id="discordPfpNameText">‚Äî</span>
          </div>
          <div class="discord-pfp-status-txt offline" id="discordStatusTxt">Offline</div>
          <div class="discord-custom-status" id="discordCustomStatus" style="display:none"></div>
        </div>
      </div>

      <!-- DISCORD SERVER WIDGET (joe-style) -->
      <div class="discord-server-widget" id="discordServerWidget" style="display:none">
        <div class="dsw-icon" id="dswIcon">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="#5865F2"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/></svg>
        </div>
        <div class="dsw-info">
          <div class="dsw-name" id="dswName">Discord Server</div>
          <div class="dsw-meta">
            <span class="dsw-dot online" id="dswOnlineDot"></span>
            <span id="dswOnline">‚Äî</span> Online &nbsp;¬∑&nbsp;
            <span id="dswMembers">‚Äî</span> Members
          </div>
        </div>
        <a class="dsw-join" id="dswJoinBtn" href="#" target="_blank" rel="noopener">Join</a>
      </div>

      <!-- DISCORD RICH PRESENCE -->
      <div class="dc-presence" id="dcPresence">
        <div class="dc-presence-img" id="dcPresenceImg">üéÆ
          <div class="dc-presence-small" id="dcPresenceSmall" style="display:none"><img id="dcPresenceSmallImg" alt=""></div>
        </div>
        <div class="dc-presence-info">
          <div class="dc-presence-state" id="dcPresenceState">Playing</div>
          <div class="dc-presence-name" id="dcPresenceName">‚Äî</div>
          <div class="dc-presence-detail" id="dcPresenceDetail"></div>
          <div class="dc-presence-time" id="dcPresenceTime"></div>
        </div>
      </div>

      <!-- SPOTIFY NOW PLAYING -->
      <div class="spotify-card" id="spotifyCard">
        <div class="spotify-album" id="spotifyAlbum">üéµ</div>
        <div class="spotify-info">
          <div class="spotify-label">
            <svg viewBox="0 0 24 24" width="10" height="10" fill="#1ed760"><path d="M12 0C5.4 0 0 5.4 0 12s5.4 12 12 12 12-5.4 12-12S18.66 0 12 0zm5.521 17.34c-.24.359-.66.48-1.021.24-2.82-1.74-6.36-2.101-10.561-1.141-.418.122-.779-.179-.899-.539-.12-.421.18-.78.54-.9 4.56-1.021 8.52-.6 11.64 1.32.42.18.479.659.301 1.02zm1.44-3.3c-.301.42-.841.6-1.262.3-3.239-1.98-8.159-2.58-11.939-1.38-.479.12-1.02-.12-1.14-.6-.12-.48.12-1.021.6-1.141C9.6 9.9 15 10.561 18.72 12.84c.361.181.54.78.241 1.2zm.12-3.36C15.24 8.4 8.82 8.16 5.16 9.301c-.6.179-1.2-.181-1.38-.721-.18-.601.18-1.2.72-1.381 4.26-1.26 11.28-1.02 15.721 1.621.539.3.719 1.02.419 1.56-.299.421-1.02.599-1.559.3z"/></svg>
            Listening on Spotify
          </div>
          <div class="spotify-song" id="spotifySong">‚Äî</div>
          <div class="spotify-artist" id="spotifyArtist">‚Äî</div>
        </div>
        <div class="spotify-bars">
          <div class="sp-bar"></div><div class="sp-bar"></div>
          <div class="sp-bar"></div><div class="sp-bar"></div>
        </div>
      </div>

      <!-- DC BADGE -->
      <div id="profileDcBadge" style="display:none;text-align:center;margin-bottom:12px">
        <div class="dc-badge">
          <svg width="12" height="12" viewBox="0 0 24 24" fill="#5865F2"><path d="M20.317 4.37a19.791 19.791 0 0 0-4.885-1.515.074.074 0 0 0-.079.037c-.21.375-.444.864-.608 1.25a18.27 18.27 0 0 0-5.487 0 12.64 12.64 0 0 0-.617-1.25.077.077 0 0 0-.079-.037A19.736 19.736 0 0 0 3.677 4.37a.07.07 0 0 0-.032.027C.533 9.046-.32 13.58.099 18.057a.082.082 0 0 0 .031.057 19.9 19.9 0 0 0 5.993 3.03.078.078 0 0 0 .084-.028c.462-.63.874-1.295 1.226-1.994a.076.076 0 0 0-.041-.106 13.107 13.107 0 0 1-1.872-.892.077.077 0 0 1-.008-.128 10.2 10.2 0 0 0 .372-.292.074.074 0 0 1 .077-.01c3.928 1.793 8.18 1.793 12.062 0a.074.074 0 0 1 .078.01c.12.098.246.198.373.292a.077.077 0 0 1-.006.127 12.299 12.299 0 0 1-1.873.892.077.077 0 0 0-.041.107c.36.698.772 1.362 1.225 1.993a.076.076 0 0 0 .084.028 19.839 19.839 0 0 0 6.002-3.03.077.077 0 0 0 .032-.054c.5-5.177-.838-9.674-3.549-13.66a.061.061 0 0 0-.031-.03z"/></svg>
          <span class="dc-status-dot online" id="dcStatusDot"></span>
          <span id="dcBadgeText">Discord</span>
        </div>
      </div>

      <!-- GITHUB -->
      <div class="github-widget" id="githubWidget" style="display:none">
        <div class="github-widget-header">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
          <span class="github-widget-user" id="githubWidgetUser">GitHub</span>
          <span class="github-widget-sub" id="githubWidgetSub">contributions</span>
        </div>
        <div class="github-contrib" id="githubContrib"></div>
        <div class="github-stats-row" id="githubStatsRow"></div>
      </div>

      <div class="socials" id="profileSocials"></div>
      <div class="link-buttons" id="profileLinkBtns" style="display:none"></div>
    </div>

    <div class="card-foot" id="cardFoot">
      <a href="/" class="credit">‚ö° vltx.lol</a>
      <span class="vcnt" id="lv">üëÅ ‚Äî views</span>
    </div>
  </div>
</div>

<!-- SHARE MODAL -->
<div class="share-modal-overlay" id="shareModalOverlay">
  <div class="share-modal">
    <div class="share-card-preview">
      <div class="share-profile-name" id="shareProfileName">‚Äî</div>
      <div class="share-url" id="shareProfileUrl">vltx.lol/‚Äî</div>
    </div>
    <div class="share-actions">
      <button class="share-btn copy" onclick="copyShareUrl()">üìã Copy Link</button>
      <button class="share-btn copy" onclick="shareNative()" style="background:rgba(168,85,247,.5)">üîó Share</button>
      <button class="share-btn close" onclick="hideShareCard()">Close</button>
    </div>
  </div>
</div>

<div class="toast" id="toast"></div>
<audio id="audioEl" style="display:none"></audio>

<script>
const username = location.pathname.replace(/^\//, '').split('/')[0].toLowerCase();
let profileData = null;

// ‚îÄ‚îÄ LOAD ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
async function loadProfile() {
  try {
    const res = await fetch(`/api/profile/${username}`);
    if (!res.ok) { showNotFound(); return; }
    const p = await res.json();
    profileData = p;
    applyProfile(p);
    fetch(`/api/view/${username}`, { method: 'POST' })
      .then(r => r.json())
      .then(d => {
        const n = d.views.toLocaleString();
        document.getElementById('vcnt').textContent = n;
        document.getElementById('lv').textContent = `üëÅ ${n} views`;
        document.getElementById('viewsBadgeNum').textContent = n;
        animCount(document.getElementById('vcnt'), d.views);
      });
    if (p.confettiBurst !== false) setTimeout(() => launchConfetti(), 800);
  } catch(e) { showNotFound(); }
}

function applyProfile(p) {
  document.title = `${p.displayName || p.username} ‚Äî VLTX`;

  // ‚îÄ‚îÄ COLORS ‚îÄ‚îÄ
  if (p.accent)     document.documentElement.style.setProperty('--accent', p.accent);
  if (p.accent2)    document.documentElement.style.setProperty('--accent2', p.accent2);
  if (p.textColor)  document.documentElement.style.setProperty('--text', p.textColor);
  if (p.cardBg) {
    const r=parseInt(p.cardBg.slice(1,3),16), g=parseInt(p.cardBg.slice(3,5),16), b=parseInt(p.cardBg.slice(5,7),16);
    const op = p.cardOpacity != null ? p.cardOpacity/100 : 0.94;
    document.documentElement.style.setProperty('--card-bg', `rgba(${r},${g},${b},${op})`);
  }
  if (p.blur !== undefined)
    document.getElementById('card').style.backdropFilter = `blur(${p.blur}px) saturate(1.6)`;
  if (p.cardWidth)  document.getElementById('card').style.maxWidth = p.cardWidth + 'px';
  if (p.cardRadius !== undefined) document.getElementById('card').style.borderRadius = p.cardRadius + 'px';

  // ‚îÄ‚îÄ FONT ‚îÄ‚îÄ
  const FONT_MAP = {
    outfit: "'Outfit',sans-serif", syne: "'Syne',sans-serif",
    mono: "'Space Mono',monospace", dm: "'DM Sans',sans-serif",
    orbitron: "'Orbitron',sans-serif", serif: "Georgia,serif"
  };
  if (p.font && FONT_MAP[p.font]) document.getElementById('card').style.fontFamily = FONT_MAP[p.font];

  // ‚îÄ‚îÄ USERNAME ‚îÄ‚îÄ
  const un = document.getElementById('profileUsername');
  un.textContent = p.displayName || p.username;
  if (p.gradStart && p.gradMid && p.gradEnd) {
    un.style.backgroundImage = `linear-gradient(${p.gradDir||'135deg'},${p.gradStart} 0%,${p.gradMid} 50%,${p.gradEnd} 100%)`;
    un.style.backgroundSize = '200% 100%';
    un.style.webkitBackgroundClip = 'text';
    un.style.webkitTextFillColor = 'transparent';
    un.style.backgroundClip = 'text';
  }

  // ‚îÄ‚îÄ META ‚îÄ‚îÄ
  if (p.pronouns) { const el=document.getElementById('profilePronouns'); el.textContent=p.pronouns; el.style.display=''; }
  if (p.role) { const el=document.getElementById('profileRole'); el.textContent=p.role; el.style.display='block'; }
  const sv = p.status === 'custom' ? p.customStatus : p.status;
  if (sv) { const el=document.getElementById('profileStatus'); el.textContent=sv; el.style.display='block'; }
  if (p.location) { const el=document.getElementById('profileLocation'); el.textContent='üìç '+p.location; el.style.display='block'; }
  if (p.showAvailable) document.getElementById('availableIndicator').classList.add('on');
  if (p.showCopyUsername !== false) {
    const btn=document.getElementById('copyUsernameBtn');
    btn.style.display='inline-flex';
    document.getElementById('copyUsernameTxt').textContent=`@${p.username||username}`;
  }

  // ‚îÄ‚îÄ BADGES ‚îÄ‚îÄ
  const bRow=document.getElementById('profileBadges');
  if ((p.badges&&p.badges.length)||p.showVerified) {
    bRow.innerHTML=(p.badges||[]).map(b=>`<span class="badge" title="${b}">${b}<span class="badge-tooltip">${b}</span></span>`).join('');
    if (p.showVerified) bRow.innerHTML+=`<span class="badge" title="Verified">‚úÖ<span class="badge-tooltip">Verified</span></span>`;
    bRow.style.display='flex';
  }

  // ‚îÄ‚îÄ ACTIVITY TAGS ‚îÄ‚îÄ
  if (p.activityTags && p.activityTags.length) {
    const row=document.getElementById('activityTagsRow');
    row.innerHTML=p.activityTags.map(t=>`<span class="activity-tag ${t.color||'purple'}">${t.icon||''} ${t.text}</span>`).join('');
  }

  // ‚îÄ‚îÄ AVATAR ‚îÄ‚îÄ
  const av=document.getElementById('av');
  if (p.avatar && /^(\/|http)/.test(p.avatar)) {
    av.innerHTML=`<img src="${p.avatar}" style="width:100%;height:100%;object-fit:cover;">`;
  } else if (p.avatarEmoji) { av.textContent=p.avatarEmoji; }
  const shapeMap={circle:'50%',squircle:'30%',square:'8px',hexagon:'50%',star:'50%'};
  if (p.avatarShape && shapeMap[p.avatarShape]) av.style.borderRadius=shapeMap[p.avatarShape];
  if (p.avSize) {
    const wrap=document.getElementById('avWrap');
    av.style.width=p.avSize+'px'; av.style.height=p.avSize+'px';
    av.style.fontSize=(p.avSize*.38)+'px';
    wrap.style.width=(p.avSize+4)+'px'; wrap.style.height=(p.avSize+4)+'px';
    wrap.style.marginTop=-(p.avSize/2)+'px';
  }
  if (p.avBorderColor) av.style.borderColor=p.avBorderColor;
  if (p.avRingStyle==='glow') av.style.boxShadow=`0 0 0 3px rgba(168,85,247,.08),0 0 30px ${p.avBorderColor||'var(--accent)'},0 0 60px ${p.avBorderColor||'var(--accent)'}40`;
  else if (p.avRingStyle==='none') av.style.border='none';
  if (p.avatarFloat===false) document.getElementById('avWrap').style.animation='none';
  if (!p.showOnline) document.getElementById('onlineDot').style.display='none';

  // ‚îÄ‚îÄ BACKGROUND ‚îÄ‚îÄ
  if (p.bgVideo) {
    const vid=document.getElementById('bg-video');
    vid.src=p.bgVideo; vid.style.display='block'; vid.style.opacity=(p.bgOpacity||40)/100;
    if (p.bgBlur) vid.style.filter=`blur(${p.bgBlur}px)`;
  } else if (p.bgImage) {
    const img=document.getElementById('bg-image');
    img.src=p.bgImage; img.style.display='block'; img.style.opacity=(p.bgOpacity||40)/100;
    if (p.bgBlur) img.style.filter=`blur(${p.bgBlur}px)`;
    if (p.bgPosition) img.style.objectPosition=p.bgPosition;
  }
  if (p.bgGrad) document.getElementById('gradientMesh').classList.add('on');
  if (p.scanlines) document.getElementById('scanlines').classList.add('on');
  if (p.neonScanline) document.getElementById('neonScanline').classList.add('on');

  // ‚îÄ‚îÄ BANNER ‚îÄ‚îÄ
  if (p.bannerText) document.getElementById('bannerText').textContent=p.bannerText;
  if (p.bannerMarquee) {
    const m=document.getElementById('bannerMarquee');
    const inner=document.getElementById('bannerMarqueeInner');
    const t=Array(6).fill(p.bannerMarquee).join(' ‚ú¶ ');
    inner.textContent=t+' ‚ú¶ '+t;
    m.style.display='block';
  }
  if (p.lyricsTicker) {
    const t=Array(4).fill(p.lyricsTicker).join(' ‚ô™ ');
    document.getElementById('lyricsTickerInner').textContent=t+' ‚ô™ '+t;
    document.getElementById('lyricsTicker').classList.add('on');
  }

  // ‚îÄ‚îÄ CONTENT ‚îÄ‚îÄ
  document.getElementById('profileTags').innerHTML=(p.tags||[]).map(t=>`<span class="tag">${t}</span>`).join('');

  if (p.skillBars && p.skillBars.length) {
    const sb=document.getElementById('profileSkillBars');
    sb.innerHTML=p.skillBars.map(s=>`
      <div class="skill-bar-row">
        <div class="skill-bar-label"><span>${s.name}</span><span>${s.level}%</span></div>
        <div class="skill-bar-track"><div class="skill-bar-fill" data-level="${s.level}"></div></div>
      </div>`).join('');
    sb.style.display='block';
    setTimeout(()=>{ sb.querySelectorAll('.skill-bar-fill').forEach(el=>el.style.width=el.dataset.level+'%'); }, 600);
  }

  if (p.skills && p.skills.length) {
    const el=document.getElementById('profileSkills');
    el.innerHTML=p.skills.map(s=>`<span class="skill-chip">${s}</span>`).join('');
    el.style.display='flex';
  }
  if (p.openTo && p.openTo.length) {
    const el=document.getElementById('profileOpenTo');
    el.innerHTML=p.openTo.map(o=>`<span class="open-chip">${o}</span>`).join('');
    el.style.display='flex';
  }
  if (p.timeline && p.timeline.length) {
    const tl=document.getElementById('profileTimeline');
    document.getElementById('timelineItems').innerHTML=p.timeline.map(t=>`
      <div class="timeline-item">
        <div class="timeline-dot">${t.icon||'üìå'}</div>
        <div class="timeline-content">
          <div class="timeline-event">${t.event}</div>
          ${t.date?`<div class="timeline-date">${t.date}</div>`:''}
          ${t.desc?`<div class="timeline-desc">${t.desc}</div>`:''}
        </div>
      </div>`).join('');
    tl.style.display='block';
  }
  if (p.quote) {
    document.getElementById('quoteText').textContent=`"${p.quote}"`;
    if (p.quoteAuthor) document.getElementById('quoteAttr').textContent=`‚Äî ${p.quoteAuthor}`;
    document.getElementById('profileQuote').style.display='block';
  }
  if (p.projectName) {
    const proj=document.getElementById('profileProject');
    proj.style.display='block';
    document.getElementById('projStatus').textContent=p.projectStatus||'üî® Building';
    document.getElementById('projName').textContent=p.projectName;
    document.getElementById('projDesc').textContent=p.projectDesc||'';
    if (p.projectUrl) { const lnk=document.getElementById('projLink'); lnk.href=p.projectUrl; lnk.style.display='inline-block'; }
  }

  // ‚îÄ‚îÄ TYPEWRITER ‚îÄ‚îÄ
  const phrases=(p.bioLines||[]).filter(Boolean);
  startTW(phrases.length ? phrases : ['']);

  // ‚îÄ‚îÄ MUSIC ‚îÄ‚îÄ
  const tracks=p.tracks||[];
  if (p.showMusic && tracks.length) {
    document.getElementById('musicPlayer').style.display='flex';
    setupMusic(tracks);
  }

  // ‚îÄ‚îÄ WEATHER ‚îÄ‚îÄ
  if (p.showWeather && p.location) loadWeather(p.location);

  // ‚îÄ‚îÄ VISITOR MAP ‚îÄ‚îÄ
  if (p.showVisitorMap) buildVisitorMap();

  // ‚îÄ‚îÄ STATS ‚îÄ‚îÄ
  document.getElementById('statFollowers').textContent=p.followers||'0';
  document.getElementById('statClicks').textContent=p.clicks||'0';
  if (p.showStats===false) document.getElementById('statsRow').style.display='none';
  if (p.showFooter===false) document.getElementById('cardFoot').style.display='none';

  // ‚îÄ‚îÄ REACTIONS ‚îÄ‚îÄ
  if (p.showReactions !== false) {
    document.getElementById('reactionBar').style.display='flex';
    loadReactions();
  }

  // ‚îÄ‚îÄ SHARE ‚îÄ‚îÄ
  if (p.showShareCard !== false) {
    document.getElementById('shareCardBtn').style.display='flex';
    document.getElementById('shareProfileName').textContent=p.displayName||p.username||username;
    document.getElementById('shareProfileUrl').textContent=`vltx.lol/${username}`;
  }

  // ‚îÄ‚îÄ DC BADGE ‚îÄ‚îÄ
  if (p.discordBadge && p.discordUser) {
    const dcEl=document.getElementById('profileDcBadge');
    dcEl.style.display='block';
    document.getElementById('dcBadgeText').textContent=p.discordUser;
    document.getElementById('dcStatusDot').className='dc-status-dot '+(p.discordStatus||'online');
    if (p.discordUrl) { dcEl.style.cursor='pointer'; dcEl.onclick=()=>window.open(p.discordUrl,'_blank'); }
  }

  // ‚îÄ‚îÄ WATERMARK ‚îÄ‚îÄ
  document.getElementById('animLogo').textContent=p.watermark||p.username?.toUpperCase()?.slice(0,4)||'VLTX';

  // ‚îÄ‚îÄ LANYARD (real-time presence) ‚îÄ‚îÄ
  if (p.discordId) loadLanyardPresence(p.discordId);
  if (p.showDiscordCard !== false && (p.discordId || p.discordUser)) {
    document.getElementById('discordProfileCard').classList.add('show');
  }

  // ‚îÄ‚îÄ DISCORD SERVER WIDGET ‚îÄ‚îÄ
  if (p.discordServerInvite) {
    const sw=document.getElementById('discordServerWidget');
    if (sw) {
      sw.style.display='flex';
      if (p.discordServerName) document.getElementById('dswName').textContent=p.discordServerName;
      const inviteCode=p.discordServerInvite.replace(/.*discord\.gg\//,'').replace(/.*discord\.com\/invite\//,'').replace(/\?.*/,'').trim();
      document.getElementById('dswJoinBtn').href=`https://discord.gg/${inviteCode}`;
      if (p.discordServerIcon) {
        document.getElementById('dswIcon').innerHTML=`<img src="${p.discordServerIcon}" alt="">`;
      }
      // Try Discord widget API for live counts ‚Äî requires widget enabled on server
      const guildId = p.discordServerId || '';
      if (guildId) {
        fetch(`https://discord.com/api/guilds/${guildId}/widget.json`)
          .then(r => r.ok ? r.json() : null)
          .then(d => {
            if (d && d.presence_count !== undefined) {
              document.getElementById('dswOnline').textContent=d.presence_count.toLocaleString();
              document.getElementById('dswOnlineDot').classList.add('online');
            } else {
              // Fallback to manually set counts
              document.getElementById('dswOnline').textContent=p.discordOnline||'‚Äî';
              document.getElementById('dswMembers').textContent=p.discordMembers||'‚Äî';
            }
          })
          .catch(()=>{
            document.getElementById('dswOnline').textContent=p.discordOnline||'‚Äî';
            document.getElementById('dswMembers').textContent=p.discordMembers||'‚Äî';
          });
      } else {
        document.getElementById('dswOnline').textContent=p.discordOnline||'‚Äî';
        document.getElementById('dswMembers').textContent=p.discordMembers||'‚Äî';
      }
    }
  }

  // ‚îÄ‚îÄ GITHUB ‚îÄ‚îÄ
  if (p.githubUser) {
    document.getElementById('githubWidget').style.display='block';
    document.getElementById('githubWidgetUser').textContent=p.githubUser;
    loadGitHubContrib(p.githubUser);
  }

  // ‚îÄ‚îÄ SOCIAL LINKS ‚îÄ‚îÄ
  const DOMAIN_MAP={
    discord:'discord.com',twitter:'twitter.com',x:'x.com',instagram:'instagram.com',
    youtube:'youtube.com',github:'github.com',spotify:'spotify.com',tiktok:'tiktok.com',
    twitch:'twitch.tv',reddit:'reddit.com',steam:'store.steampowered.com',kick:'kick.com',
    snapchat:'snapchat.com',pinterest:'pinterest.com',linkedin:'linkedin.com',
    roblox:'roblox.com',cashapp:'cash.app',paypal:'paypal.com',
    bereal:'bereal.com',threads:'threads.net',bluesky:'bsky.app',
    onlyfans:'onlyfans.com',patreon:'patreon.com',vsco:'vsco.co',
    soundcloud:'soundcloud.com',behance:'behance.net',dribbble:'dribbble.com',
    medium:'medium.com',substack:'substack.com',kofi:'ko-fi.com',
  };
  function getFavicon(label, url) {
    const key=label.toLowerCase().replace(/[\s\-_]/g,'').replace(/[^a-z]/g,'');
    const domain=DOMAIN_MAP[key]||(()=>{try{return new URL(url).hostname.replace('www.','');}catch{return null;}})();
    return domain?`https://www.google.com/s2/favicons?domain=${domain}&sz=64`:null;
  }
  const links=p.links||[];
  if ((p.linkStyle||'icons')==='icons') {
    document.getElementById('profileSocials').innerHTML=links.map(l=>{
      const fav=getFavicon(l.label,l.url);
      return `<a href="${l.url}" class="soc" target="_blank" rel="noopener" onclick="trackClick()">
        ${fav?`<img src="${fav}" alt="${l.label}" onerror="this.style.display='none';this.nextElementSibling.style.display='block'">`:'' }
        <span class="fallback" style="${fav?'display:none':''}">üîó</span>
        <span class="soc-tip">${l.label}</span>
      </a>`;
    }).join('');
  } else {
    const btns=document.getElementById('profileLinkBtns');
    btns.style.display='flex';
    btns.innerHTML=links.map(l=>{
      const fav=getFavicon(l.label,l.url);
      return `<a href="${l.url}" class="link-btn" target="_blank" rel="noopener" onclick="trackClick()">
        ${fav?`<img src="${fav}" alt="">`:' <span>üîó</span>'}
        <span>${l.label}</span>
        <span style="color:var(--muted);font-size:.75rem">‚Üí</span>
      </a>`;
    }).join('');
  }

  // ‚îÄ‚îÄ EFFECTS ‚îÄ‚îÄ
  if (p.symbolRain !== false) startSymbolRain();
  if (p.cardTilt !== false) initCardTilt();
  if (p.matrixRain) startMatrixRain();
  if (p.snowRain) startSnowRain();
  if (p.floatingEmoji) startFloatingEmoji(p.floatingEmoji);
  if (p.bgEffect === 'aurora') startAurora();
  else if (p.bgEffect === 'plasma') startPlasma();

  // ‚îÄ‚îÄ USERNAME EFFECTS ‚îÄ‚îÄ
  const nameEffects={glitch:'glitch-active',shake:'username-shake',fuzzy:'username-fuzzy',rainbow:'username-rainbow'};
  if (p.nameAnim && nameEffects[p.nameAnim]) {
    un.classList.add(nameEffects[p.nameAnim]);
  } else if (p.nameAnim === 'wave') {
    applyWaveEffect(un);
  } else if (p.nameAnim === 'shuffle') {
    startShuffleEffect(un);
  }

  // ‚îÄ‚îÄ CURSOR ‚îÄ‚îÄ
  const cursorTypes=['dot','ring','cross','glow','none'];
  if (p.cursorEffect && cursorTypes.includes(p.cursorEffect)) document.body.classList.add('cursor-'+p.cursorEffect);
  if (p.spotlightEffect) {
    document.getElementById('spotlight').classList.add('on');
    document.addEventListener('mousemove',e=>{
      document.getElementById('spotlight').style.background=`radial-gradient(circle 220px at ${e.clientX}px ${e.clientY}px,rgba(168,85,247,.09) 0%,transparent 100%)`;
    });
  }

  // ‚îÄ‚îÄ LAYOUT & SKINS ‚îÄ‚îÄ
  const card=document.getElementById('card');
  if (p.layout==='modern') card.classList.add('layout-modern');
  else if (p.layout==='wide') card.classList.add('layout-wide');
  const skinMap={frosted:'skin-frosted',solid:'skin-solid',neon:'skin-neon',terminal:'skin-terminal'};
  if (p.cardSkin && skinMap[p.cardSkin]) card.classList.add(skinMap[p.cardSkin]);
  if (p.monoIcons) card.classList.add('mono-icons');

  // ‚îÄ‚îÄ BORDER ‚îÄ‚îÄ
  const borderMap={rainbow:'rainbow-border',glow:'glow-border',solid:'solid-border',fire:'fire-border',electric:'electric-border',none:'no-border'};
  if (p.borderStyle && borderMap[p.borderStyle]) card.classList.add(borderMap[p.borderStyle]);

  // ‚îÄ‚îÄ VOLUME ‚îÄ‚îÄ
  if (p.showVolume) document.getElementById('volumeControl').classList.add('show');

  // ‚îÄ‚îÄ ANIMATED TAB TITLE ‚îÄ‚îÄ
  if (p.animTitle && p.displayName) {
    const frames=['‚ö°','‚ú®','üåü','üí´'];
    let fi=0;
    const base=p.displayName+' ‚Äî VLTX';
    setInterval(()=>{ document.title=frames[fi%frames.length]+' '+base; fi++; }, 900);
  }

  // ‚îÄ‚îÄ VIEWS BADGE ‚îÄ‚îÄ
  if (p.showViewsBadge !== false) document.getElementById('viewsBadge').classList.add('show');
}

function showNotFound() {
  document.getElementById('card').innerHTML=`<div class="notfound"><h1>404</h1><p>This profile doesn't exist yet.</p><a href="/customize">Create yours on VLTX ‚Üí</a></div>`;
}

// ‚îÄ‚îÄ TRACK CLICK ‚îÄ‚îÄ
function trackClick() {
  fetch(`/api/click/${username}`, { method: 'POST' }).catch(()=>{});
}

// ‚îÄ‚îÄ DARK/LIGHT ‚îÄ‚îÄ
let isDark=true;
function toggleDarkLight() {
  isDark=!isDark;
  document.body.className=isDark?'dark-mode':'light-mode';
  document.getElementById('modeToggle').textContent=isDark?'üåô':'‚òÄÔ∏è';
  showToast(isDark?'üåô Dark mode':'‚òÄÔ∏è Light mode');
}

// ‚îÄ‚îÄ COPY USERNAME ‚îÄ‚îÄ
function copyUsername() {
  const name=document.getElementById('copyUsernameTxt').textContent;
  navigator.clipboard.writeText(name).then(()=>showToast('üìã Copied!'));
}

// ‚îÄ‚îÄ TYPEWRITER ‚îÄ‚îÄ
let _twTimer,_twPhrases=[],_twIdx=0,_twChar=0,_twDel=false;
function startTW(phrases) {
  _twPhrases=phrases;clearTimeout(_twTimer);
  _twIdx=0;_twChar=0;_twDel=false;
  document.getElementById('tw').textContent='';
  _stepTW();
}
function _stepTW() {
  const el=document.getElementById('tw');
  const phrase=_twPhrases[_twIdx]||'';
  if (!_twDel) {
    _twChar++;el.textContent=phrase.slice(0,_twChar);
    if (_twChar>=phrase.length){_twDel=true;_twTimer=setTimeout(_stepTW,2400);}
    else{_twTimer=setTimeout(_stepTW,70);}
  } else {
    _twChar--;el.textContent=phrase.slice(0,_twChar);
    if (_twChar<=0){_twDel=false;_twIdx=(_twIdx+1)%_twPhrases.length;_twTimer=setTimeout(_stepTW,400);}
    else{_twTimer=setTimeout(_stepTW,33);}
  }
}

// ‚îÄ‚îÄ MUSIC ‚îÄ‚îÄ
let _tracks=[],_trackIdx=0,_playing=false;
const audioEl=document.getElementById('audioEl');
function setupMusic(t){_tracks=t;loadTrack(0);}
function loadTrack(i){
  _trackIdx=((i%_tracks.length)+_tracks.length)%_tracks.length;
  const tk=_tracks[_trackIdx];
  audioEl.src=tk.url;
  document.getElementById('mtitle').textContent=tk.name;
  document.getElementById('mart').textContent=`Track ${_trackIdx+1} of ${_tracks.length}`;
  document.getElementById('prog').style.width='0%';
  const alb=document.getElementById('alb');
  if (tk.cover){alb.innerHTML=`<img src="${tk.cover}" alt="${tk.name}">`;alb.style.background='transparent';}
  else{alb.innerHTML='üéµ';alb.style.background='linear-gradient(135deg,#2d1060,#0c2a50)';}
  if (_playing) audioEl.play().catch(()=>{});
}
function togglePlay(){
  _playing=!_playing;
  const btn=document.getElementById('playBtn'),alb=document.getElementById('alb'),wave=document.getElementById('waveformBars');
  if (_playing){audioEl.play().catch(()=>{});btn.textContent='‚è∏';alb.classList.add('spin');wave.classList.remove('paused');showToast('üéµ '+_tracks[_trackIdx].name);}
  else{audioEl.pause();btn.textContent='‚ñ∂';alb.classList.remove('spin');wave.classList.add('paused');}
}
function nextTrack(){_stopPlay();loadTrack(_trackIdx+1);}
function prevTrack(){_stopPlay();loadTrack(_trackIdx-1);}
function _stopPlay(){_playing=false;document.getElementById('playBtn').textContent='‚ñ∂';document.getElementById('alb').classList.remove('spin');document.getElementById('waveformBars').classList.add('paused');}
audioEl.addEventListener('timeupdate',()=>{if(!audioEl.duration)return;document.getElementById('prog').style.width=(audioEl.currentTime/audioEl.duration*100)+'%';});
audioEl.addEventListener('ended',()=>{if(_tracks.length>1)nextTrack();});

// ‚îÄ‚îÄ WEATHER ‚îÄ‚îÄ
async function loadWeather(location) {
  try {
    const res=await fetch(`https://wttr.in/${encodeURIComponent(location)}?format=j1`);
    const data=await res.json();
    const curr=data.current_condition[0];
    const icons={Clear:'‚òÄÔ∏è',Sunny:'‚òÄÔ∏è',Partly:'‚õÖ',Cloudy:'‚òÅÔ∏è',Overcast:'‚òÅÔ∏è',Mist:'üå´Ô∏è',Rain:'üåßÔ∏è',Snow:'‚ùÑÔ∏è',Thunder:'‚õàÔ∏è',Fog:'üå´Ô∏è',Blizzard:'üå®Ô∏è'};
    const desc=curr.weatherDesc[0].value;
    const icon=Object.keys(icons).find(k=>desc.includes(k))?icons[Object.keys(icons).find(k=>desc.includes(k))]:'üå§';
    document.getElementById('weatherIcon').textContent=icon;
    document.getElementById('weatherTemp').textContent=`${curr.temp_C}¬∞C`;
    document.getElementById('weatherDesc').textContent=desc;
    document.getElementById('weatherLoc').textContent=location;
    document.getElementById('weatherWidget').style.display='flex';
  } catch{}
}

// ‚îÄ‚îÄ REACTIONS ‚îÄ‚îÄ
const reactionCounts={fire:47,heart:83,crown:12,sparkle:31,target:8};
const reactionKeys={'üî•':'fire','‚ù§Ô∏è':'heart','üëë':'crown','‚ú®':'sparkle','üéØ':'target'};
const userReactions=new Set(JSON.parse(localStorage.getItem('reactions_'+username)||'[]'));
function loadReactions(){
  Object.entries(reactionCounts).forEach(([k,v])=>{const el=document.getElementById('rc-'+k);if(el)el.textContent=v;});
  userReactions.forEach(emoji=>{const el=document.querySelector(`.reaction[data-emoji="${emoji}"]`);if(el)el.classList.add('reacted');});
}
function addReaction(el){
  const emoji=el.dataset.emoji,key=reactionKeys[emoji];
  el.classList.add('pop');setTimeout(()=>el.classList.remove('pop'),300);
  if(userReactions.has(emoji)){userReactions.delete(emoji);el.classList.remove('reacted');reactionCounts[key]--;}
  else{userReactions.add(emoji);el.classList.add('reacted');reactionCounts[key]++;spawnFloatingEmoji(emoji,el);}
  const cEl=el.querySelector('.reaction-count');if(cEl)cEl.textContent=reactionCounts[key];
  localStorage.setItem('reactions_'+username,JSON.stringify([...userReactions]));
}
function spawnFloatingEmoji(emoji,anchor){
  const rect=anchor.getBoundingClientRect();
  const el=document.createElement('div');el.className='float-reaction';el.textContent=emoji;
  el.style.left=(rect.left+rect.width/2)+'px';el.style.top=rect.top+'px';
  document.body.appendChild(el);setTimeout(()=>el.remove(),2600);
}

// ‚îÄ‚îÄ VISITOR MAP ‚îÄ‚îÄ
function buildVisitorMap(){
  const grid=document.getElementById('visitorMapGrid');
  Array.from({length:80},()=>{
    const d=document.createElement('div');
    d.className='vmap-dot'+(Math.random()<0.12?' active':'');
    grid.appendChild(d);
  });
  document.getElementById('visitorMap').style.display='block';
  setInterval(()=>{
    const dots=grid.querySelectorAll('.vmap-dot');
    const rand=dots[Math.floor(Math.random()*dots.length)];
    rand.classList.toggle('active');
  },800);
}

// ‚îÄ‚îÄ SHARE ‚îÄ‚îÄ
function showShareCard(){document.getElementById('shareModalOverlay').classList.add('show');}
function hideShareCard(){document.getElementById('shareModalOverlay').classList.remove('show');}
function copyShareUrl(){navigator.clipboard.writeText(location.href).then(()=>showToast('üìã Profile URL copied!'));}
function shareNative(){
  const name=profileData?.displayName||profileData?.username||username;
  if(navigator.share)navigator.share({title:name+' on VLTX',url:location.href});
  else copyShareUrl();
}

// ‚îÄ‚îÄ CONFETTI ‚îÄ‚îÄ
function launchConfetti(){
  const canvas=document.getElementById('confetti-canvas');
  canvas.width=window.innerWidth;canvas.height=window.innerHeight;
  const ctx=canvas.getContext('2d');
  const particles=Array.from({length:80},()=>({x:Math.random()*canvas.width,y:-10,vx:(Math.random()-.5)*4,vy:Math.random()*4+2,color:`hsl(${Math.random()*360},80%,60%)`,size:Math.random()*6+3,rot:Math.random()*360,rotV:(Math.random()-.5)*8}));
  let frame=0;
  function draw(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
    particles.forEach(p=>{p.x+=p.vx;p.y+=p.vy;p.rot+=p.rotV;if(p.y>canvas.height){p.y=-10;p.x=Math.random()*canvas.width;}ctx.save();ctx.translate(p.x,p.y);ctx.rotate(p.rot*Math.PI/180);ctx.fillStyle=p.color;ctx.fillRect(-p.size/2,-p.size/2,p.size,p.size/2);ctx.restore();});
    if(++frame<120)requestAnimationFrame(draw);else ctx.clearRect(0,0,canvas.width,canvas.height);
  }
  draw();
}

// ‚îÄ‚îÄ FLOATING EMOJI ‚îÄ‚îÄ
function startFloatingEmoji(emojis){
  const list=typeof emojis==='string'?emojis.split(','):emojis;
  function spawn(){const el=document.createElement('div');el.className='float-reaction';el.style.left=Math.random()*100+'vw';el.style.top='100vh';el.style.fontSize=(Math.random()*14+10)+'px';el.textContent=list[Math.floor(Math.random()*list.length)];el.style.animation=`floatUp ${2+Math.random()*3}s ease-out forwards`;document.body.appendChild(el);setTimeout(()=>el.remove(),5000);}
  setInterval(spawn,1200);
}

// ‚îÄ‚îÄ CURSOR ‚îÄ‚îÄ
let hasMouse=false,curX=0,curY=0,trailX=0,trailY=0;
const curEl=document.getElementById('cur'),trailEl=document.getElementById('cur-trail');
function firstMove(e){
  hasMouse=true;document.body.classList.add('has-mouse');
  curEl.style.opacity=trailEl.style.opacity='1';
  curX=e.clientX;curY=e.clientY;trailX=curX;trailY=curY;
  document.removeEventListener('mousemove',firstMove);
  document.addEventListener('mousemove',trackMouse);
  (function loop(){trailX+=(curX-trailX)*.13;trailY+=(curY-trailY)*.13;trailEl.style.left=trailX+'px';trailEl.style.top=trailY+'px';requestAnimationFrame(loop);})();
}
function trackMouse(e){curX=e.clientX;curY=e.clientY;curEl.style.left=curX+'px';curEl.style.top=curY+'px';}
document.addEventListener('mousemove',firstMove);

// ‚îÄ‚îÄ CLICK SPARKS ‚îÄ‚îÄ
document.addEventListener('click',e=>{
  for(let i=0;i<8;i++){
    const spark=document.createElement('div');
    const angle=(i/8)*Math.PI*2,dist=30+Math.random()*20;
    const dx=Math.cos(angle)*dist,dy=Math.sin(angle)*dist;
    Object.assign(spark.style,{position:'fixed',left:e.clientX+'px',top:e.clientY+'px',width:'4px',height:'4px',borderRadius:'50%',background:`hsl(${260+Math.random()*40},100%,70%)`,pointerEvents:'none',zIndex:9999,transition:`transform ${0.4+Math.random()*.3}s ease-out,opacity .5s ease-out`,transform:'translate(-50%,-50%)',opacity:'1'});
    document.body.appendChild(spark);
    requestAnimationFrame(()=>{spark.style.transform=`translate(calc(-50% + ${dx}px),calc(-50% + ${dy}px))`;spark.style.opacity='0';});
    setTimeout(()=>spark.remove(),800);
  }
});

// ‚îÄ‚îÄ BANNER ‚îÄ‚îÄ
(function(){
  const cv=document.getElementById('bnr'),bEl=cv.parentElement,cx=cv.getContext('2d');
  let raf;
  function resize(){cv.width=bEl.offsetWidth;cv.height=bEl.offsetHeight;}
  resize();new ResizeObserver(resize).observe(bEl);
  const stars=Array.from({length:120},()=>({x:Math.random(),y:Math.random(),r:Math.random()*1.4+.3,a:Math.random(),spd:Math.random()*.3+.07}));
  const neb=[{cx:.2,cy:.4,c:'168,85,247'},{cx:.8,cy:.6,c:'34,211,238'},{cx:.5,cy:.8,c:'244,63,94'}];
  function draw(){
    const W=cv.width,H=cv.height;
    cx.clearRect(0,0,W,H);
    const g=cx.createLinearGradient(0,0,W,H);
    g.addColorStop(0,'#0d0220');g.addColorStop(.5,'#0a1628');g.addColorStop(1,'#150526');
    cx.fillStyle=g;cx.fillRect(0,0,W,H);
    neb.forEach(n=>{const ng=cx.createRadialGradient(n.cx*W,n.cy*H,0,n.cx*W,n.cy*H,W*.35);ng.addColorStop(0,`rgba(${n.c},.07)`);ng.addColorStop(1,'transparent');cx.fillStyle=ng;cx.fillRect(0,0,W,H);});
    stars.forEach(s=>{s.a+=s.spd*.02;if(s.a>1){s.a=0;s.x=Math.random();s.y=Math.random();}cx.beginPath();cx.arc(s.x*W,s.y*H,s.r,0,Math.PI*2);cx.fillStyle=`rgba(255,255,255,${(s.a*.85).toFixed(2)})`;cx.fill();});
    raf=requestAnimationFrame(draw);
  }
  draw();
  document.addEventListener('visibilitychange',()=>{document.hidden?cancelAnimationFrame(raf):draw();});
})();

// ‚îÄ‚îÄ PARTICLE NETWORK ‚îÄ‚îÄ
(function(){
  const cv=document.getElementById('ptx'),cx=cv.getContext('2d');
  let W,H,raf;
  const pts=Array.from({length:55},()=>({x:0,y:0,vx:(Math.random()-.5)*.26,vy:(Math.random()-.5)*.26,r:Math.random()*1.8+.5}));
  function resize(){W=cv.width=window.innerWidth;H=cv.height=window.innerHeight;pts.forEach(p=>{p.x=Math.random()*W;p.y=Math.random()*H;});}
  resize();window.addEventListener('resize',resize);
  function draw(){
    cx.clearRect(0,0,W,H);
    pts.forEach(p=>{p.x+=p.vx;p.y+=p.vy;if(p.x<0||p.x>W)p.vx*=-1;if(p.y<0||p.y>H)p.vy*=-1;cx.beginPath();cx.arc(p.x,p.y,p.r,0,Math.PI*2);cx.fillStyle='rgba(168,85,247,.18)';cx.fill();});
    for(let i=0;i<pts.length;i++)for(let j=i+1;j<pts.length;j++){const dx=pts[i].x-pts[j].x,dy=pts[i].y-pts[j].y,d=Math.sqrt(dx*dx+dy*dy);if(d<115){cx.beginPath();cx.moveTo(pts[i].x,pts[i].y);cx.lineTo(pts[j].x,pts[j].y);cx.strokeStyle=`rgba(168,85,247,${((1-d/115)*.1).toFixed(3)})`;cx.lineWidth=.5;cx.stroke();}}
    raf=requestAnimationFrame(draw);
  }
  draw();
  document.addEventListener('visibilitychange',()=>{document.hidden?cancelAnimationFrame(raf):draw();});
})();

// ‚îÄ‚îÄ SYMBOL RAIN ‚îÄ‚îÄ
function startSymbolRain(){
  const syms=['‚ú¶','¬∑','‚äπ','‚úß','‚ó¶','‚àò','‚åÇ','‚óà','‚ü°','‚äï'];
  function spawn(){const dur=6+Math.random()*6,el=document.createElement('span');el.style.cssText=`position:fixed;left:${Math.random()*100}vw;top:0;font-size:${(Math.random()*10+7).toFixed(1)}px;color:rgba(168,85,247,${(Math.random()*.22+.05).toFixed(2)});animation:rainDrop ${dur.toFixed(2)}s linear forwards;pointer-events:none;z-index:3;user-select:none`;el.textContent=syms[Math.floor(Math.random()*syms.length)];document.body.appendChild(el);setTimeout(()=>el.remove(),dur*1000+300);}
  for(let i=0;i<8;i++)setTimeout(spawn,i*180);
  setInterval(spawn,420);
}

// ‚îÄ‚îÄ MATRIX RAIN ‚îÄ‚îÄ
function startMatrixRain(){
  const chars='„Ç¢„Ç§„Ç¶„Ç®„Ç™„Ç´„Ç≠„ÇØ„Ç±„Ç≥„Çµ„Ç∑„Çπ„Çª„ÇΩ„Çø„ÉÅ„ÉÑ„ÉÜ„Éà„Éä„Éã„Éå„Éç„Éé„Éè„Éí„Éï„Éò„Éõ„Éû„Éü„É†„É°„É¢„É§„É¶„É®0123456789ABCDEF';
  function spawn(){const el=document.createElement('span');const dur=4+Math.random()*5;el.style.cssText=`position:fixed;left:${Math.random()*100}vw;top:-20px;font-size:${Math.random()*8+8}px;font-family:'Space Mono',monospace;color:rgba(0,255,65,${(Math.random()*.4+.1).toFixed(2)});animation:rainDrop ${dur.toFixed(2)}s linear forwards;pointer-events:none;z-index:3;user-select:none`;el.textContent=chars[Math.floor(Math.random()*chars.length)];document.body.appendChild(el);setTimeout(()=>el.remove(),dur*1000+300);}
  for(let i=0;i<12;i++)setTimeout(spawn,i*100);
  setInterval(spawn,120);
}

// ‚îÄ‚îÄ SNOW ‚îÄ‚îÄ
function startSnowRain(){
  function spawn(){const el=document.createElement('span');const dur=6+Math.random()*8;el.style.cssText=`position:fixed;left:${Math.random()*100}vw;top:-10px;font-size:${Math.random()*10+8}px;color:rgba(200,230,255,${(Math.random()*.4+.1).toFixed(2)});animation:rainDrop ${dur.toFixed(2)}s linear forwards;pointer-events:none;z-index:3;user-select:none`;el.textContent=Math.random()<.5?'‚ùÑ':'‚ùÖ';document.body.appendChild(el);setTimeout(()=>el.remove(),dur*1000+300);}
  for(let i=0;i<8;i++)setTimeout(spawn,i*200);
  setInterval(spawn,300);
}

// ‚îÄ‚îÄ CARD TILT ‚îÄ‚îÄ
function initCardTilt(){
  const card=document.getElementById('card');
  setTimeout(()=>{card.style.transition='transform .35s ease,box-shadow .35s ease';},900);
  card.addEventListener('mousemove',e=>{
    if(!hasMouse)return;
    const r=card.getBoundingClientRect();
    const dx=(e.clientX-r.left-r.width/2)/r.width,dy=(e.clientY-r.top-r.height/2)/r.height;
    card.style.transform=`perspective(900px) rotateY(${dx*6}deg) rotateX(${-dy*6}deg) scale(1.012)`;
  });
  card.addEventListener('mouseleave',()=>{card.style.transform='perspective(900px) rotateY(0) rotateX(0) scale(1)';});
}

// ‚îÄ‚îÄ AURORA ‚îÄ‚îÄ
function startAurora(){
  const cv=document.getElementById('aurora-canvas');cv.classList.add('on');
  cv.width=window.innerWidth;cv.height=window.innerHeight;
  const ctx=cv.getContext('2d');let t=0;
  window.addEventListener('resize',()=>{cv.width=window.innerWidth;cv.height=window.innerHeight;});
  const colors=[[168,85,247],[34,211,238],[244,63,94],[16,185,129]];
  function draw(){
    ctx.clearRect(0,0,cv.width,cv.height);
    colors.forEach((c,i)=>{
      const x=cv.width*(.2+.6*Math.sin(t*.4+i*2.1)),y=cv.height*(.3+.3*Math.cos(t*.3+i*1.7)),r=cv.width*(.3+.1*Math.sin(t*.5+i));
      const g=ctx.createRadialGradient(x,y,0,x,y,r);
      g.addColorStop(0,`rgba(${c[0]},${c[1]},${c[2]},.12)`);g.addColorStop(.5,`rgba(${c[0]},${c[1]},${c[2]},.04)`);g.addColorStop(1,'transparent');
      ctx.fillStyle=g;ctx.fillRect(0,0,cv.width,cv.height);
    });
    t+=.008;requestAnimationFrame(draw);
  }
  draw();
}

// ‚îÄ‚îÄ PLASMA ‚îÄ‚îÄ
function startPlasma(){
  const cv=document.getElementById('plasma-canvas');cv.classList.add('on');
  cv.width=window.innerWidth;cv.height=window.innerHeight;
  const ctx=cv.getContext('2d');let t=0;
  window.addEventListener('resize',()=>{cv.width=window.innerWidth;cv.height=window.innerHeight;});
  function draw(){
    const W=cv.width,H=cv.height;
    const img=ctx.createImageData(W>>2,H>>2);const d=img.data;
    for(let y=0;y<H>>2;y++){for(let x=0;x<W>>2;x++){
      const v=Math.sin(x*.15+t)+Math.sin(y*.1+t*.7)+Math.sin((x+y)*.08+t*1.3)+Math.sin(Math.sqrt(x*x+y*y)*.12);
      const hue=(v+4)/8,h6=hue*360/60,hi=Math.floor(h6)%6,f=h6-Math.floor(h6);
      const [r,g,b]=[[1,1-f,0,0,f,1],[0,0,f,1,1,1-f],[0,f,1,1,1-f,0]].map(ch=>Math.round(ch[hi]*40));
      const i=(y*(W>>2)+x)*4;d[i]=r;d[i+1]=g;d[i+2]=b;d[i+3]=80;
    }}
    ctx.clearRect(0,0,W,H);
    const off=document.createElement('canvas');off.width=W>>2;off.height=H>>2;
    off.getContext('2d').putImageData(img,0,0);ctx.drawImage(off,0,0,W,H);
    t+=.02;requestAnimationFrame(draw);
  }
  draw();
}

// ‚îÄ‚îÄ USERNAME EFFECTS ‚îÄ‚îÄ
function applyWaveEffect(el){
  const text=el.textContent;el.classList.add('username-wave');
  el.innerHTML=text.split('').map(c=>`<span>${c}</span>`).join('');
  el.querySelectorAll('span').forEach((s,i)=>{s.style.animationDelay=(i*.06)+'s';});
}
function startShuffleEffect(el){
  const original=el.textContent;
  const chars='ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789@#$%&';
  let isShuffling=false;
  function shuffle(){
    if(isShuffling)return;isShuffling=true;let iterations=0;
    const interval=setInterval(()=>{
      el.textContent=original.split('').map((c,i)=>{if(i<iterations)return c;return chars[Math.floor(Math.random()*chars.length)];}).join('');
      iterations+=1/3;
      if(iterations>=original.length){clearInterval(interval);el.textContent=original;isShuffling=false;}
    },40);
  }
  setInterval(shuffle,4000);setTimeout(shuffle,800);
}

// ‚îÄ‚îÄ ANIMATE COUNT ‚îÄ‚îÄ
function animCount(el,target){
  const s=performance.now(),dur=1400;
  (function tick(now){const p=Math.min((now-s)/dur,1),e=1-Math.pow(1-p,3);el.textContent=Math.floor(e*target).toLocaleString();if(p<1)requestAnimationFrame(tick);else el.textContent=target.toLocaleString();})(s);
}

// ‚îÄ‚îÄ TOAST ‚îÄ‚îÄ
let _toastTimer;
function showToast(msg){
  const t=document.getElementById('toast');t.textContent=msg;t.classList.add('show');
  clearTimeout(_toastTimer);_toastTimer=setTimeout(()=>t.classList.remove('show'),2800);
}

// ‚îÄ‚îÄ VOLUME ‚îÄ‚îÄ
let _muted=false;
function setVolume(v){audioEl.volume=v/100;document.getElementById('volMuteBtn').textContent=v==0?'üîá':v<50?'üîâ':'üîä';}
function toggleMute(){_muted=!_muted;audioEl.muted=_muted;document.getElementById('volMuteBtn').textContent=_muted?'üîá':'üîä';}
audioEl.volume=0.8;

// ‚îÄ‚îÄ GITHUB ‚îÄ‚îÄ
async function loadGitHubContrib(user){
  try{
    const res=await fetch(`https://github-contributions-api.jogruber.de/v4/${user}?y=last`);
    const data=await res.json();
    const contrib=document.getElementById('githubContrib');
    const total=data.total?.lastYear||0;
    const weeks=data.contributions||[];
    const show=weeks.slice(-26);
    contrib.innerHTML=show.map(week=>`<div class="github-contrib-col">${week.map(day=>{const level=day.level??(day.count===0?0:day.count<3?1:day.count<6?2:day.count<10?3:4);return `<div class="gh-day" data-level="${level}" title="${day.date}: ${day.count}"></div>`}).join('')}</div>`).join('');
    document.getElementById('githubWidgetSub').textContent=`${total.toLocaleString()} contributions`;
    document.getElementById('githubStatsRow').innerHTML=`<div class="github-stat">üì¶ <span class="github-stat-num" id="ghRepos">‚Äî</span> repos</div><div class="github-stat">üë• <span class="github-stat-num" id="ghFollowers">‚Äî</span> followers</div>`;
    const ur=await fetch(`https://api.github.com/users/${user}`);
    const ud=await ur.json();
    if(!ud.message){document.getElementById('ghRepos').textContent=ud.public_repos||0;document.getElementById('ghFollowers').textContent=ud.followers||0;}
  }catch{
    const contrib=document.getElementById('githubContrib');
    contrib.innerHTML=Array.from({length:26},()=>`<div class="github-contrib-col">${Array.from({length:7},()=>`<div class="gh-day" data-level="${Math.random()<.3?Math.ceil(Math.random()*4):0}"></div>`).join('')}</div>`).join('');
    document.getElementById('githubWidgetSub').textContent='contributions';
  }
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// LANYARD ‚Äî real-time Discord presence
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
async function loadLanyardPresence(discordId) {
  try {
    const res=await fetch(`https://api.lanyard.rest/v1/users/${discordId}`);
    const data=await res.json();
    if (!data.success) return;
    applyLanyardData(data.data, discordId);
    // Poll every 30s
    setTimeout(()=>loadLanyardPresence(discordId),30000);
  } catch(e){}
}

function applyLanyardData(d, discordId) {
  // ‚îÄ‚îÄ PROFILE CARD ‚îÄ‚îÄ
  const card=document.getElementById('discordProfileCard');
  if (card) {
    card.classList.add('show');
    // Avatar
    const pfpEl=document.getElementById('discordPfp');
    if (d.discord_user?.avatar) {
      const hash=d.discord_user.avatar;
      const ext=hash.startsWith('a_')?'gif':'png';
      pfpEl.innerHTML=`<img src="https://cdn.discordapp.com/avatars/${discordId}/${hash}.${ext}?size=128" alt="PFP" onerror="this.parentElement.innerHTML='üéÆ'">`;
    }
    // Auto-use Discord PFP if no custom avatar
    const mainAv=document.getElementById('av');
    if (mainAv && !mainAv.querySelector('img') && d.discord_user?.avatar && profileData && !profileData.avatar) {
      const hash=d.discord_user.avatar;
      const ext=hash.startsWith('a_')?'gif':'png';
      mainAv.innerHTML=`<img src="https://cdn.discordapp.com/avatars/${discordId}/${hash}.${ext}?size=256" style="width:100%;height:100%;object-fit:cover;">`;
    }
    // Name
    const nameEl=document.getElementById('discordPfpNameText');
    if (nameEl) nameEl.textContent=d.discord_user?.global_name||d.discord_user?.username||'Unknown';
    // Status
    const statusEl=document.getElementById('discordPfpStatus');
    const statusTxtEl=document.getElementById('discordStatusTxt');
    const statusLabels={online:'üü¢ Online',idle:'üåô Idle',dnd:'üî¥ Do Not Disturb',offline:'‚ö´ Offline'};
    const status=d.discord_status||'offline';
    if (statusEl) statusEl.className=`discord-pfp-status ${status}`;
    if (statusTxtEl) { statusTxtEl.className=`discord-pfp-status-txt ${status}`;statusTxtEl.textContent=statusLabels[status]||'Offline'; }
    // Custom status
    const csAct=d.activities?.find(a=>a.type===4);
    const csEl=document.getElementById('discordCustomStatus');
    if (csEl && csAct && (csAct.emoji?.name||csAct.state)) {
      csEl.style.display='flex';
      csEl.textContent=`${csAct.emoji?.name||''} ${csAct.state||''}`.trim();
    }
  }

  // ‚îÄ‚îÄ STATUS DOT ON BADGE ‚îÄ‚îÄ
  const dot=document.getElementById('dcStatusDot');
  if (dot) dot.className='dc-status-dot '+(d.discord_status||'offline');

  // ‚îÄ‚îÄ ONLINE DOT ON AVATAR ‚îÄ‚îÄ
  const onlineDot=document.getElementById('onlineDot');
  if (onlineDot) {
    const sc={online:'',idle:'idle',dnd:'dnd',offline:'offline'};
    const cls=sc[d.discord_status];
    if (cls) onlineDot.classList.add(cls);
    if (d.discord_status==='offline') onlineDot.style.display='none';
  }

  // ‚îÄ‚îÄ SPOTIFY CARD ‚îÄ‚îÄ
  if (d.listening_to_spotify && d.spotify) {
    const spCard=document.getElementById('spotifyCard');
    if (spCard) {
      spCard.classList.add('show');
      document.getElementById('spotifySong').textContent=d.spotify.song||'Unknown';
      document.getElementById('spotifyArtist').textContent=d.spotify.artist?'by '+d.spotify.artist:'';
      const albEl=document.getElementById('spotifyAlbum');
      if (d.spotify.album_art_url) albEl.innerHTML=`<img src="${d.spotify.album_art_url}" alt="album">`;
    }
  }

  // ‚îÄ‚îÄ RICH PRESENCE ‚îÄ‚îÄ
  const presEl=document.getElementById('dcPresence');
  if (d.listening_to_spotify) {
    if (presEl) {
      presEl.classList.add('show');
      document.getElementById('dcPresenceState').textContent='üéµ Listening to Spotify';
      document.getElementById('dcPresenceName').textContent=d.spotify?.song||'Unknown';
      document.getElementById('dcPresenceDetail').textContent='by '+(d.spotify?.artist||'');
      const imgEl=document.getElementById('dcPresenceImg');
      if (d.spotify?.album_art_url) imgEl.innerHTML=`<img src="${d.spotify.album_art_url}" alt="album">`;
      else imgEl.textContent='üéµ';
    }
  } else {
    const acts=d.activities?.filter(a=>a.type===0);
    if (acts && acts.length>0) {
      const act=acts[0];
      if (presEl) {
        presEl.classList.add('show');
        document.getElementById('dcPresenceState').textContent='Playing';
        document.getElementById('dcPresenceName').textContent=act.name||'Unknown';
        document.getElementById('dcPresenceDetail').textContent=act.details||act.state||'';
        const imgEl=document.getElementById('dcPresenceImg');
        if (act.assets?.large_image) {
          const appId=act.application_id;
          const imgKey=act.assets.large_image;
          const imgUrl=imgKey.startsWith('mp:')?imgKey.replace('mp:','https://media.discordapp.net/'):`https://cdn.discordapp.com/app-assets/${appId}/${imgKey}.png`;
          imgEl.innerHTML=`<img src="${imgUrl}" alt="${act.name}" onerror="this.parentElement.textContent='üéÆ'">`;
          if (act.assets.small_image) {
            const sk=act.assets.small_image;
            const surl=sk.startsWith('mp:')?sk.replace('mp:','https://media.discordapp.net/'):`https://cdn.discordapp.com/app-assets/${appId}/${sk}.png`;
            const sm=document.getElementById('dcPresenceSmall');
            sm.style.display='block';
            document.getElementById('dcPresenceSmallImg').src=surl;
          }
        } else { imgEl.textContent='üéÆ'; }
        if (act.timestamps?.start) {
          const startMs=act.timestamps.start;
          const updateTime=()=>{
            const elapsed=Math.floor((Date.now()-startMs)/1000);
            const h=Math.floor(elapsed/3600),m=Math.floor((elapsed%3600)/60),s=elapsed%60;
            document.getElementById('dcPresenceTime').textContent=(h?`${h}:`:'')+(h?String(m).padStart(2,'0'):m)+':'+String(s).padStart(2,'0')+' elapsed';
          };
          updateTime();setInterval(updateTime,1000);
        }
      }
    }
  }
}

loadProfile();
</script>
</body>
</html>
